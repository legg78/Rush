<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j">
<ui:composition template="./issCardDetailsTemplate.jspx">
    <ui:define name="stepContent">
        <script type="text/javascript">
            //<![CDATA[
            function checkWizardMbChangeCardholderPhotoDS() {
                var changeCardholderPhotoDSChecked = true;

                var fileName = document.getElementById('#{viewId}stepPageInclude:changeCardholderPhotoDataForm:newPhotoFileName:fileItems');

                fileName.style.background = '#FFFFFF';

                if (fileName.innerHTML == "") {
                    fileName.style.background = '#FF9999';
                    changeCardholderPhotoDSChecked = false
                }

                return changeCardholderPhotoDSChecked;
            }
            //]]>
        </script>

        <f:loadBundle var="lblCrd" basename="ru.bpc.sv2.ui.bundles.Process" />
        <!--@elvariable id="stepBean" type="ru.bpc.sv2.ui.common.wizard.callcenter.MbChangeCardholderPhotoDS"-->
        <h:form id="changeCardholderPhotoDataForm">
            <ui:include src="/pages/common/wizard/commonWizardActions.jspx">
                <ui:param name="bean" value="#{bean}" />
                <ui:param name="action" value="#{action}" />
            </ui:include>

            <h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
                <h:panelGrid columns="2" styleClass="cardholderdata"
                             columnClasses="width-150, width250">

                    <h:outputLabel for="newPhotoFileName" title="#{lblProcess.file_name}" value="* #{lblProcess.file_name}:"/>
                    <rich:fileUpload id="newPhotoFileName"
                                     addControlLabel="#{lblForm.add}"
                                     fileUploadListener="#{MbChangeCardholderPhotoDS.fileUploadListener}"
                                     maxFilesQuantity="1"
                                     noDuplicate="true"
                                     listHeight="50px;"
                                     listWidth="50%"
                                     immediateUpload="true">
                        <a4j:support event="onclear" reRender="newPhotoFileName"/>
                    </rich:fileUpload>

                </h:panelGrid>
            </h:panelGroup>
        </h:form>
    </ui:define>
</ui:composition>
</html>
