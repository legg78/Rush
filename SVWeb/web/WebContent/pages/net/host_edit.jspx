<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
	  xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext">
<ui:composition>
	<rich:modalPanel id="net_host_modal_panel" autosized="true" minWidth="200" minHeight="100">
      	<f:facet name="header">
      		<h:panelGroup id="net_host_modal_header">
      			<h:outputText value="#{lblNet.new_host}" rendered="#{MbHosts.newMode}"/>
      			<h:outputText value="#{lblNet.edit_host}" rendered="#{MbHosts.editMode}"/>
      		</h:panelGroup>
        </f:facet>
  	    <f:facet name="controls">
      	</f:facet>
      		
		<h:form id="hostEditForm">
			<script type="text/javascript">//<!--
				oldValue["hostEditForm"] = "#{MbHosts.newHost.lang}";
				
				function checkHostFields() {
					var checked = true;
					
					if (document.getElementById('hostEditForm:newHostName').value == "") {
						document.getElementById('hostEditForm:newHostNameError').style.display = "inline";
						checked = false;
					}
					
					if (document.getElementById('hostEditForm:newHostNet').value == "") {
						document.getElementById('hostEditForm:newHostNetError').style.display = "inline";
						checked = false;
					}	
					
					if (document.getElementById('hostEditForm:newHostOwner')
							&& document.getElementById('hostEditForm:newHostOwner').value == "") {
						document.getElementById('hostEditForm:newHostOwnerError').style.display = "inline";
						checked = false;
					}	
					
					return checked;
				}
				//-->
			</script>
			<h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
				<h:panelGrid columns="2" styleClass="cardholderdata" width="100%"
					columnClasses="firstColModal, width250">

					<h:outputLabel value="#{lblCommon.language}: "
						title="#{lblCommon.language}" />
					<h:selectOneMenu id="hostLang" value="#{MbHosts.newHost.lang}"
						rendered="#{MbHosts.newMode}">
						<f:selectItems value="#{MbHosts.languages}" />
					</h:selectOneMenu>
					<h:selectOneMenu id="editLang" value="#{MbHosts.newHost.lang}"
						rendered="#{MbHosts.editMode}"
						onchange="document.getElementById('host:confirmPanelForm:newValue').value = this.value;
									#{rich:component('host:confirmPanel')}.show()">
						<f:selectItems value="#{MbHosts.languages}" />
					</h:selectOneMenu>
					
					<h:outputLabel value="#{lblNet.participant_type}" title="#{lblNet.participant_type}"/>
						<h:selectOneMenu id="newPartyType" value="#{MbHosts.newHost.participantType}">
							<f:selectItem itemValue=""/>
						    <f:selectItems value="#{MbHosts.participantTypes}"/>
						</h:selectOneMenu>

					<h:outputLabel value="* #{lblCommon.description}: "
						title="#{lblCommon.description}" />
					<h:panelGrid cellpadding="0" cellspacing="0">
						<h:inputText id="newHostName" value="#{MbHosts.newHost.hostName}"
							maxlength="2000" label="#{lblCommon.description}"
							onblur="hideErrorField(this)">
							<f:validateLength minimum="3" />
							<a4j:support event="onchange" reRender="newHostNameErr"
								limitToList="true" ajaxSingle="true" />
						</h:inputText>
						<rich:message for="newHostName" id="newHostNameErr"
							styleClass="errorMarker" />
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
							id="newHostNameError" style="display:none;">
							<f:param name="fieldName" value="#{lblCommon.description}"/>
						</h:outputFormat>
					</h:panelGrid>

					<h:outputLabel value="* #{lblNet.network}: "
						title="#{lblNet.network}" />
					<h:panelGrid cellpadding="0" cellspacing="0">
						<h:selectOneMenu id="newHostNet"
							value="#{MbHosts.newHost.networkId}"
							label="#{lblNet.network}" disabled="#{MbHosts.editMode}"
							onblur="hideErrorField(this)">
							<a4j:support event="onchange"
								reRender="newHostOwner" limitToList="true"
								ajaxSingle="true" />
							<f:selectItem itemValue="" />
							<f:selectItems value="#{MbHosts.networks}" />
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
							id="newHostNetError" style="display:none;">
							<f:param name="fieldName" value="#{lblNet.network}"/>
						</h:outputFormat>
					</h:panelGrid>

					<h:outputLabel value="* #{lblNet.host_owner}: "
						title="#{lblNet.host_owner}" />
					<h:panelGrid cellpadding="0" cellspacing="0"
						rendered="#{MbHosts.editMode}">
						<h:selectOneMenu id="editHostOwner" disabled="true"
							value="#{MbHosts.newHost.instId}" required="true"
							label="#{lblNet.host_owner}">
							<f:selectItem itemValue="" />
							<f:selectItems value="#{MbHosts.hostOwners}" />
							<a4j:support event="onchange" reRender="editHostOwnerErr"
								limitToList="true" ajaxSingle="true" />
						</h:selectOneMenu>
						<rich:message for="editHostOwner" id="editHostOwnerErr"
							styleClass="errorMarker" />
					</h:panelGrid>
					<h:panelGrid cellpadding="0" cellspacing="0"
						rendered="#{MbHosts.newMode}">
						<h:selectOneMenu id="newHostOwner" value="#{MbHosts.newHost.id}"
							label="#{lblNet.host_owner}"
							onblur="hideErrorField(this)">
							<f:selectItem itemValue="" />
							<f:selectItems value="#{MbHosts.hostOwners}" />
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
							id="newHostOwnerError" style="display:none;">
							<f:param name="fieldName" value="#{lblNet.host_owner}"/>
						</h:outputFormat>
					</h:panelGrid>

					<h:outputLabel value="#{lblNet.auth_if}: "
						title="#{lblNet.auth_if}" />
					<h:selectOneMenu id="newHostAuthIf"
						value="#{MbHosts.newHost.onlineStdId}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{MbHosts.onlineStandards}" />
					</h:selectOneMenu>
					<h:outputLabel value="" />
					<h:outputText
						value="#{lblNet.online_or_offline_standard_must_be_defined}"
						style="font-size: x-small;font-style:italic" />

					<h:outputLabel value="#{lblNet.clearing_if}: "
						title="#{lblNet.clearing_if}" />
					<h:selectOneMenu id="newHostClearingIf"
						value="#{MbHosts.newHost.offlineStdId}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{MbHosts.offlineStandards}" />
					</h:selectOneMenu>
					<h:outputLabel value="" />
					<h:outputText
						value="#{lblNet.online_or_offline_standard_must_be_defined}"
						style="font-size: x-small;font-style:italic" />

					<h:outputLabel value="#{lblCommon.status}: " title="#{lblCommon.status}" />
					<h:selectOneMenu id="status" value="#{MbHosts.newHost.status}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{MbHosts.statuses}"/>
					</h:selectOneMenu>
				</h:panelGrid>
			</h:panelGroup>
			<h:panelGroup layout="block"
				styleClass="bottom_search_result_block_buttons">
				<h:panelGroup layout="block"
					styleClass="bottom_search_result_left_buttons">
					<h:panelGrid columns="3" columnClasses="width99P,,paddingR12">
						<h:outputText />
						<bre:taggedCommandButton value="#{lblForm.save}" type="submit"
							action="#{MbHosts.save}" reRender="#{rerenderList}"
							onclick="if (!checkHostFields()) return false; disableModalPanelBtns(this)"
							oncomplete="enableModalPanelBtns(this); if (#{usession.noErrorResponse}) #{rich:component('net_host_modal_panel')}.hide()" />
						<bre:taggedCommandButton value="#{lblForm.cancel}"
							action="#{MbHosts.close}" immediate="true" limitToList="true"
							oncomplete="#{rich:component('net_host_modal_panel')}.hide()"
							reRender="hostEditForm">
							<f:actionListener type="ru.bpc.jsf.A4JFormReset" />
						</bre:taggedCommandButton>
					</h:panelGrid>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>		
	</rich:modalPanel>

	<ui:include src="/pages/utils/langConfirmPanel.jspx">
	  	<ui:param name="backingBean" value="#{MbHosts}"/>
	  	<ui:param name="rerenderList" value="hostEditForm:newHostName"/>
	  	<ui:param name="editElem" value="hostEditForm:editLang"/>
	  	<ui:param name="newValue" value="#{MbHosts.newHost.lang}"/>
	  	<ui:param name="subviewId" value="host"/>
	  	<ui:param name="formName" value="hostEditForm" />
	</ui:include>
</ui:composition>
</html>
					