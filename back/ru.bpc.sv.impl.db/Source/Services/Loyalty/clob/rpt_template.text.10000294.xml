<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:output method="text" encoding="utf-8" indent="no"/>
<xsl:template match="/">
<xsl:choose>
<xsl:when test="report/datasource/entity_type = 'ENTTMRCH'">To <xsl:value-of select="report/datasource/company_short_name"/>

Dear Sir or Madam,
Kindly find the attached file for your monthly loyalty statement of merchant <xsl:value-of select="report/datasource/merchant_name"/> for month <xsl:value-of select="report/datasource/end_date"/>

Regards.
</xsl:when>
<xsl:otherwise>
Dear  <xsl:value-of select="report/datasource/first_name"/> <xsl:choose><xsl:when test="report/datasource/second_name != ''"><xsl:value-of select="report/datasource/second_name" /></xsl:when></xsl:choose>
Kindly find the attached file for your monthly loyalty statement for month <xsl:value-of select="report/datasource/end_date"/>

Regards.
</xsl:otherwise>
</xsl:choose>
</xsl:template>
</xsl:stylesheet>
