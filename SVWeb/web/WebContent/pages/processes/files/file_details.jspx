<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:bm="http://www.bpc.ru/jsf/misc"
	xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext">
<ui:composition>
	<rich:modalPanel id="prc_file_view_modal_panel" autosized="true"
		minWidth="300" minHeight="50"
		left="#{MbProcessFilesSearch.activeProcessFile.xml ? '300' : 'auto'}">
		<f:facet name="header">
			<h:outputText value="#{lblPrc.file}" />
		</f:facet>
		<f:facet name="controls">
		</f:facet>
		<h:form id="prc_file_view_modal_div">
			<h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
				<h:panelGrid columns="2" styleClass="cardholderdata" width="100%"
					columnClasses="firstColModal, width250">

					<h:outputLabel for="lang" value="#{lblCommon.language}: " title="#{lblCommon.language}" />
					<h:selectOneMenu id="lang"
						value="#{MbProcessFilesSearch.activeProcessFile.lang}"
						disabled="true">
						<f:selectItems value="#{MbProcessFilesSearch.languages}" />
					</h:selectOneMenu>

					<h:outputLabel value="* #{lblCommon.short_desc}: " title="#{lblCommon.short_desc}" />
					<h:inputText id="name"
						value="#{MbProcessFilesSearch.activeProcessFile.shortDesc}"
						readonly="true" />

					<h:outputLabel value="#{lblCommon.full_desc}: " title="#{lblCommon.full_desc}" />
					<h:inputText
						value="#{MbProcessFilesSearch.activeProcessFile.fullDesc}"
						readonly="true" />

					<h:outputLabel value="#{lblPrc.purpose}: " title="#{lblPrc.purpose}" />
					<h:inputText
						rendered="#{MbProcessFilesSearch.activeProcessFile.purpose != null}"
						readonly="true"
						value="#{DictUtils.articlesByLang[MbProcessFilesSearch.activeProcessFile.lang][MbProcessFilesSearch.activeProcessFile.purpose]}"
						title="#{DictUtils.articlesByLang[MbProcessFilesSearch.activeProcessFile.lang][MbProcessFilesSearch.activeProcessFile.purpose]}" />
					<h:inputText
						rendered="#{MbProcessFilesSearch.activeProcessFile.purpose == null}"
						readonly="true" />

					<h:outputLabel value="#{lblPrc.file_type}: " title="#{lblPrc.file_type}" />
					<h:inputText
						rendered="#{MbProcessFilesSearch.activeProcessFile.type != null}"
						readonly="true"
						value="#{DictUtils.articlesByLang[MbProcessFilesSearch.activeProcessFile.lang][MbProcessFilesSearch.activeProcessFile.type]}"
						title="#{DictUtils.articlesByLang[MbProcessFilesSearch.activeProcessFile.lang][MbProcessFilesSearch.activeProcessFile.type]}" />
					<h:inputText
						rendered="#{MbProcessFilesSearch.activeProcessFile.type == null}"
						readonly="true" />

					<h:outputLabel value="#{lblPrc.saver_class}: " title="#{lblPrc.saver_class}" />
					<h:inputText
							value="#{MbProcessFilesSearch.activeProcessFile.saverId} - #{MbProcessFilesSearch.activeProcessFile.saverName}"
						readonly="true" />


					<h:outputLabel value="#{lblPrc.file_format}: " title="#{lblPrc.file_format}" />
					<h:inputText
						value="#{DictUtils.articlesByLang[MbProcessFilesSearch.activeProcessFile.lang][MbProcessFilesSearch.activeProcessFile.fileNature]}"
						title="#{DictUtils.articlesByLang[MbProcessFilesSearch.activeProcessFile.lang][MbProcessFilesSearch.activeProcessFile.fileNature]}"
						rendered="#{MbProcessFilesSearch.activeProcessFile.fileNature != null}"
						readonly="true" />
					<h:inputText value="" title=""
						rendered="#{MbProcessFilesSearch.activeProcessFile.fileNature == null}"
						readonly="true" />
						
					<h:outputLabel value="#{lblPrc.xsd_source}: " title="#{lblPrc.xsd_source}" 
							rendered="#{MbProcessFilesSearch.activeProcessFile.xml}" id="xsdSourcePanelLabel"/>
					<h:panelGroup id="xsdSourcePanel" rendered="#{MbProcessFilesSearch.activeProcessFile.xml}">
						<bre:taggedCommandButton value="#{lblForm.view}"
							limitToList="true"
							immediate="true"
							oncomplete="#{rich:component('fileDetails:code_mirror_modal_panel')}.show(); setCodeValue_fileDetails();"
							reRender="fileDetails:code_mirror_modal_panel">
						</bre:taggedCommandButton>
						<h:inputTextarea
							value="#{MbProcessFilesSearch.activeProcessFile.xsdSource}"
							id="xsdSourceText" rows="20" style="width:450px;display: none">
						</h:inputTextarea>
					</h:panelGroup>

				</h:panelGrid>
			</h:panelGroup>			
			<h:panelGroup layout="block"
				styleClass="bottom_search_result_block_buttons">
				<h:panelGroup layout="block"
					styleClass="bottom_search_result_left_buttons">
					<h:panelGrid columns="2" columnClasses="width99P,paddingR12">
						<h:outputText />
						<bre:taggedCommandButton value="#{lblForm.cancel}"
							action="#{MbProcessFilesSearch.close}" limitToList="true"
							immediate="true"
							oncomplete="#{rich:component('prc_file_view_modal_panel')}.hide()"
							reRender="prc_file_view_modal_div">
							<f:actionListener type="ru.bpc.jsf.A4JFormReset" />
						</bre:taggedCommandButton>
					</h:panelGrid>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</rich:modalPanel>

	<ui:include src="/pages/utils/codeMirrorPanel.jspx">
		<ui:param name="codeElement" value="prc_file_view_modal_div:xsdSourceText"/>
		<ui:param name="subviewId" value="fileDetails"/>
		<ui:param name="readOnly" value="true"/>
		<ui:param name="title" value="#{lblPrc.xsd_source}"/>
	</ui:include>
</ui:composition>
</html>