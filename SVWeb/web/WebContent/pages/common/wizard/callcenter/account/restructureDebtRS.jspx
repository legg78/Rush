<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:bpct="http://www.bpc.ru/jsf/tiles"
      xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:bpc="http://www.bpc.ru/jsf/misc">
<ui:composition template="./../creditDetailsTemplate.jspx">
    <ui:define name="stepContent">
        <f:loadBundle var="lblAcc" basename="ru.bpc.sv2.ui.bundles.Acc" />

        <h:form id="balanceCorrectionDSForm" style="padding:10px;">
            <ui:include src="/pages/common/wizard/commonWizardActions.jspx">
                <ui:param name="bean" value="#{bean}" />
                <ui:param name="action" value="#{action}" />
            </ui:include>

            <h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
                <rich:dataTable id="alertDetailsTable"
                                value="#{MbRestructureDebtRS.emptyTable}"
                                var="field"
                                styleClass="res-table noHeader"
                                style="margin-bottom: 5px;"
                                width="100%">
                    <rich:columnGroup rowClasses=",odd"
                                      columnClasses="firstCol alignLeft width20, width80 width250 noPadding">
                        <rich:column breakBefore="true">
                            <h:outputLabel value="#{lblCommon.institution}" title="#{lblCommon.institution}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputLabel value="#{DictUtils.institutesMap[MbRestructureDebtRS.calculation.instIdString]}"
                                           title="#{DictUtils.institutesMap[MbRestructureDebtRS.calculation.instIdString]}"
                                           rendered="#{MbRestructureDebtRS.calculation.instId != null}"/>
                            <h:outputLabel value="" title=""
                                           rendered="#{MbRestructureDebtRS.calculation.instId == null}"/>
                        </rich:column>

                        <rich:column breakBefore="true">
                            <h:outputLabel value="#{lblAcc.account}" title="#{lblAcc.account}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputLabel value="#{MbRestructureDebtRS.calculation.accountNumber}"
                                           title="#{MbRestructureDebtRS.calculation.accountNumber}"
                                           rendered="#{MbRestructureDebtRS.calculation.accountNumber != null}"/>
                            <h:outputLabel value="#{MbRestructureDebtRS.calculation.accountId}"
                                           title="#{MbRestructureDebtRS.calculation.accountId}"
                                           rendered="#{MbRestructureDebtRS.calculation.accountNumber == null}"/>
                        </rich:column>

                        <rich:column breakBefore="true">
                            <h:outputLabel value="#{lblAcc.account_status}" title="#{lblAcc.account_status}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputLabel value="#{DictUtils.articles[MbRestructureDebtRS.account.status]}"
                                           title="#{DictUtils.articles[MbRestructureDebtRS.account.status]}"/>
                        </rich:column>

                        <rich:column breakBefore="true">
                            <h:outputLabel value="#{lblAcc.dpp_algorithm}" title="#{lblAcc.dpp_algorithm}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputLabel value="#{DictUtils.articles[MbRestructureDebtRS.calculation.calcAlgorithm]}"
                                           title="#{DictUtils.articles[MbRestructureDebtRS.calculation.calcAlgorithm]}"
                                           rendered="#{MbRestructureDebtRS.calculation.calcAlgorithm != null}"/>
                            <h:outputLabel value="" title=""
                                           rendered="#{MbRestructureDebtRS.calculation.calcAlgorithm == null}"/>
                        </rich:column>

                        <rich:column breakBefore="true">
                            <h:outputLabel value="#{lblAcc.installment_count}" title="#{lblAcc.installment_count}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputLabel value="#{MbRestructureDebtRS.calculation.instalmentCount}"
                                           title="#{MbRestructureDebtRS.calculation.instalmentCount}"/>
                        </rich:column>

                        <rich:column breakBefore="true">
                            <h:outputLabel value="#{lblAcc.installment_amount}" title="#{lblAcc.installment_amount}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputLabel value="#{fmt:formatMoney(MbRestructureDebtRS.calculation.instalmentAmount,
                                                     CurrencyUtils.currencyObjectsMap[MbRestructureDebtRS.calculation.currency].exponent)}"
                                           title="#{fmt:formatMoney(MbRestructureDebtRS.calculation.instalmentAmount,
                                                     CurrencyUtils.currencyObjectsMap[MbRestructureDebtRS.calculation.currency].exponent)}"/>
                        </rich:column>

                        <rich:column breakBefore="true">
                            <h:outputLabel value="#{lblAcc.interest_rate}" title="#{lblAcc.interest_rate}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputLabel value="#{MbRestructureDebtRS.calculation.interestRate * 100} %"
                                           title="#{MbRestructureDebtRS.calculation.interestRate * 100} %"/>
                        </rich:column>

                        <rich:column breakBefore="true">
                            <h:outputLabel value="#{lblAcc.dpp_amount}" title="#{lblDpp.dpp_amount}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputLabel value="#{fmt:formatMoney(MbRestructureDebtRS.calculation.dppAmount,
                                                     CurrencyUtils.currencyObjectsMap[MbRestructureDebtRS.calculation.currency].exponent)}"
                                           title="#{fmt:formatMoney(MbRestructureDebtRS.calculation.dppAmount,
                                                     CurrencyUtils.currencyObjectsMap[MbRestructureDebtRS.calculation.currency].exponent)}"/>
                        </rich:column>

                        <rich:column breakBefore="true">
                            <h:outputLabel value="#{lblAcc.installment_count}" title="#{lblDpp.installment_count}"/>
                        </rich:column>
                        <rich:column>
                            <h:outputLabel value="#{MbRestructureDebtRS.calculation.instalmentCount}"
                                           title="#{MbRestructureDebtRS.calculation.instalmentCount}"/>
                        </rich:column>
                    </rich:columnGroup>
                </rich:dataTable>
            </h:panelGroup>
        </h:form>
    </ui:define>
</ui:composition>
</html>
