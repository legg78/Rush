<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich"
	xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext">
	<ui:composition>
		<h:form>

			<rich:extendedDataTable id="checkGroupsTable"
				tableState="#{MbCheckSelections.tableState}" styleClass="res-table"
				headerClass="res-table-header" rowClasses=",odd" selectedClass="res-table-selected"
				var="item" value="#{MbCheckSelections.checkSelections}" selection="#{MbCheckSelections.itemSelection}"
				rows="#{MbCheckSelections.rowsNum}" height="255px" selectionMode="single"
				width="100%" enableContextMenu="true"
				noDataLabel="#{MbCheckSelections.searching?lblCommon['no_records_found'] : lblCommon['enter_search_criteria_above']}"
				reRender="#{reRenderList}">

				<a4j:support event="onselectionchange" eventsQueue="queue"
					reRender="#{reRenderList}" />

				<rich:column id="id" label="#{lblCommon.id}" title="ID"
					sortBy="#{'id'}" width="5%">
					<f:facet name="header">
						<h:outputText value="#{lblCommon.id}" title="#{lblCommon.id}" />
					</f:facet>
					<h:outputText value="#{item.id}" title="#{item.id}" />
				</rich:column>

				<rich:column id="oper_type" label="#{lblOpr.oper_type}"
					title="Oper type" width="15%">
					<f:facet name="header">
						<h:outputText value="#{lblOpr.oper_type}" title="#{lblOpr.oper_type}" />
					</f:facet>
					<h:outputText value="#{DictUtils.articles[item.operType]}"
						title="#{DictUtils.articles[item.operType]}" rendered="#{!item.anyOperType and item.operType != null}" />
					<h:outputText value="" title=""
						rendered="#{!item.anyOperType and item.operType == null}" />
					<h:outputText value="#{lblCommon.all}" rendered="#{item.anyOperType}" />
				</rich:column>

				<rich:column id="msg_type" label="#{lblOpr.msg_type}"
					title="Msg type" width="15%">
					<f:facet name="header">
						<h:outputText value="#{lblOpr.msg_type}" title="#{lblOpr.msg_type}" />
					</f:facet>
					<h:outputText value="#{DictUtils.articles[item.msgType]}"
						title="#{DictUtils.articles[item.msgType]}" rendered="#{item.msgType != null and !item.anyMsgType}" />
					<h:outputText value="" title="" rendered="#{item.msgType == null and !item.anyMsgType}" />
					<h:outputText value="#{lblCommon.all}" rendered="#{item.anyMsgType}" />
				</rich:column>

				<rich:column id="party_type" label="#{lblOpr.party_type}"
					title="Party type" width="15%">
					<f:facet name="header">
						<h:outputText value="#{lblOpr.party_type}" title="#{lblOpr.party_type}" />
					</f:facet>
					<h:outputText value="#{DictUtils.articles[item.partyType]}"
						title="#{DictUtils.articles[item.partyType]}" rendered="#{!item.anyPartyType and item.partyType != null}" />
					<h:outputText value="" title=""
						rendered="#{!item.anyPartyType and item.partyType == null}" />
					<h:outputText value="#{lblForm.all_any}" rendered="#{item.anyPartyType}" />
				</rich:column>

				<rich:column id="institution" label="#{lblCommon.institution}"
					title="Institution" width="15%">
					<f:facet name="header">
						<h:outputText value="#{lblCommon.institution}" title="#{lblCommon.institution}" />
					</f:facet>
					<h:outputText value="#{item.instName}" title="#{item.instName}"
						rendered="#{!item.anyInst}" />
					<h:outputText value="#{lblCommon.all}" rendered="#{item.anyInst}" />
				</rich:column>

				<rich:column id="network" label="#{lblOpr.network}"
					title="Network" width="12%">
					<f:facet name="header">
						<h:outputText value="#{lblOpr.network}" title="#{lblOpr.network}" />
					</f:facet>
					<div class="#{CurrencyUtils.objectsMap['ENTTNETW'][item.networkId]}" />
					<h:outputText value="#{item.networkName}" title="#{item.networkName}"
						rendered="#{!item.anyNetwork}" />
					<h:outputText value="#{lblCommon.all}" rendered="#{item.anyNetwork}" />
				</rich:column>

				<rich:column id="check_group" label="#{lblOpr.check_group}"
					title="Group name" width="15%">
					<f:facet name="header">
						<h:outputText value="#{lblOpr.check_group}" title="#{lblOpr.check_group}" />
					</f:facet>
					<h:outputText value="#{item.checkGroupName}" title="#{item.checkGroupName}" />
				</rich:column>

				<rich:column id="order" label="#{lblCommon.order}"
					title="Exec order" width="8%" sortBy="#{'execOrder'}">
					<f:facet name="header">
						<h:outputText value="#{lblCommon.order}" title="#{lblCommon.order}" />
					</f:facet>
					<h:outputText value="#{item.execOrder}" title="#{item.execOrder}" />
				</rich:column>

			</rich:extendedDataTable>

			<h:panelGroup layout="block" styleClass="bottom_search_result_block"
				style="height:30px; overflow:hidden;">
				<h:panelGroup layout="block" styleClass="bottom_search_result_left">

					<h:panelGrid id="btnPanel" columns="3" styleClass="buttons_block">
						<bre:taggedCommandButton id="addBtn"
							disabled="#{MbOperTypes.activeOperType == null}"
							reRender="chkSelectionModalHeader, chkSelectionModalDiv" value="#{lblForm.add}"
							oncomplete="#{rich:component('chkSelectionModalPanel')}.show()"
							action="#{MbOperTypes.addCheck}" image="/images/create_doc.gif"
							rendered="#{usession.inRole['ADD_OPR_CHECK_SELECT']}" />
						<bre:taggedCommandButton id="editBtn"
							reRender="chkSelectionModalHeader, chkSelectionModalDiv" value="#{lblForm.edit}"
							action="#{MbCheckSelections.edit}" oncomplete="#{rich:component('chkSelectionModalPanel')}.show()"
							disabled="#{MbCheckSelections.activeCheckSelection == null}"
							image="/images/edit.gif" rendered="#{usession.inRole['MODIFY_OPR_CHECK_SELECT']}" />
						<bre:taggedCommandButton id="deleteBtn"
							value="#{lblForm.delete}"
							oncomplete="#{rich:component('deleteCheckSelectionViewId:confirmPanel')}.show()"
							disabled="#{MbCheckSelections.activeCheckSelection == null}"
							image="/images/delete.gif" rendered="#{usession.inRole['REMOVE_OPR_CHECK_SELECT']}" />
					</h:panelGrid>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>

		<ui:include src="/pages/operations/checkSelectionEdit.jspx">
			<ui:param name="rerenderList" value="#{MbOperTypes.entityTab}, #{reRenderList}"></ui:param>
			<ui:param name="lockOperType" value="true"></ui:param>
		</ui:include>
		
		<ui:include src="/pages/utils/confirmPanel.jspx">
			<ui:param name="backingBean" value="#{MbCheckSelections}"/>
			<ui:param name="yesAction" value="delete"/>
			<ui:param name="warningMsg" value="#{lblMsg.confirm_delete}"/> 
			<ui:param name="rerenderList" value="#{MbOperTypes.entityTab}, #{reRenderList}"/>
			<ui:param name="confirmQuestion" value=" "/> 
			<ui:param name="subviewId" value="deleteCheckSelectionViewId"/>
			<ui:param name="yes" value="#{lblForm.ok}"/>
			<ui:param name="no" value="#{lblForm.cancel}"/>
		</ui:include>

	</ui:composition>
</html>