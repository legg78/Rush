<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:bm="http://www.bpc.ru/jsf/misc"
      xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext"
      xmlns:fmt="http://www.bpc.ru/el/formatter">
<ui:composition>
    <f:loadBundle var="lblCom" basename="ru.bpc.sv2.ui.bundles.Common"/>
    <f:loadBundle var="lblCrd" basename="ru.bpc.sv2.ui.bundles.Crd"/>
    <f:loadBundle var="lblCmn" basename="ru.bpc.sv2.ui.bundles.Cmn"/>
    <f:loadBundle var="lblCup" basename="ru.bpc.sv2.ui.bundles.Cup"/>
    <f:loadBundle var="lblForm" basename="ru.bpc.sv2.ui.bundles.Form"/>
    <f:loadBundle var="lblOpr" basename="ru.bpc.sv2.ui.bundles.Opr"/>
    <f:loadBundle var="lblPrc" basename="ru.bpc.sv2.ui.bundles.Process"/>
    <f:loadBundle var="lblPrd" basename="ru.bpc.sv2.ui.bundles.Prd"/>
    <f:loadBundle var="lblRpt" basename="ru.bpc.sv2.ui.bundles.Rpt"/>
    <f:loadBundle var="lblRej" basename="ru.bpc.sv2.ui.bundles.Reject"/>
    <f:loadBundle var="lblRec" basename="ru.bpc.sv2.ui.bundles.Rec"/>
    <f:loadBundle var="lblVis" basename="ru.bpc.sv2.ui.bundles.Vis"/>

    <h:form id="detailsForm">
        <h:panelGroup id="detailsWrapper"
                      layout="block"
                      styleClass="carddata-wrapper"
                      style="height: 100%; overflow-y: auto;overflow-x: hidden;position:relative;">
            <script>updateHeight();</script>

            <rich:dataTable id="detailsTable"
                            value="#{MbVisaSmsReports.emptyTable}"
                            var="field"
                            styleClass="res-table noHeader"
                            width="100%">
                <rich:columnGroup rowClasses=",odd" columnClasses="firstCol alignLeft width20, width80 width250 noPadding">
                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblCom.id}: " title="#{lblCom.id}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.id}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblRej.file_id}: " title="#{lblRej.file_id}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.fileId}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblPrd.record_number}: " title="#{lblPrd.record_number}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.recordNumber}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblCom.status}: " title="#{lblCom.status}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel rendered="#{MbVisaSmsReports.activeItem.status != null}"
                                       value="#{MbVisaSmsReports.activeItem.status} - #{MbVisaSmsReports.activeItem.statusDesc}"/>
                        <h:outputLabel rendered="#{MbVisaSmsReports.activeItem.status == null}" value=""/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.record_type}: " title="#{lblVis.record_type}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.recordType}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.iss_acq_ind}: " title="#{lblVis.iss_acq_ind}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.issAcq}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.isa_ind}: " title="#{lblVis.isa_ind}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.isaInd}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.giv_flag}: " title="#{lblVis.giv_flag}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.givFlag}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.affiliate_bin}: " title="#{lblVis.affiliate_bin}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.affiliateBin}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblCom.sttl_date}: " title="#{lblCom.sttl_date}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.sttlDate}">
                            <f:convertDateTime pattern="#{usession.datePattern}" timeZone="#{CommonUtils.timeZone}"/>
                        </h:outputLabel>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.validation_code}: " title="#{lblVis.validation_code}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.valCode}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblCom.reference_number}: " title="#{lblCom.reference_number}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.refnum}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblRec.trace_number}: " title="#{lblRec.trace_number}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.traceNum}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblOpr.msg_type}: " title="#{lblOpr.msg_type}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.reqMsgType}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblCmn.resp_code}: " title="#{lblCmn.resp_code}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.respCode}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.process_code}: " title="#{lblVis.process_code}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.procCode}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.reason_code}: " title="#{lblVis.reason_code}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.msgReasonCode}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.card_number}: " title="#{lblVis.card_number}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.cardNumber}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.transaction_ind}: " title="#{lblVis.transaction_ind}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.trxnInd}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblOpr.sttl_amount}: " title="#{lblOpr.sttl_amount}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{fmt:formatMoney(MbVisaSmsReports.activeItem.sttlAmount,
                                               CurrencyUtils.currencyObjectsMap[MbVisaSmsReports.activeItem.sttlCurrCode].exponent)}
                                             #{CurrencyUtils.currencyShortNamesMap[MbVisaSmsReports.activeItem.sttlCurrCode]}" />
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblCup.sttl_sign}: " title="#{lblCup.sttl_sign}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.sttlSign}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.reserved}: " title="#{lblVis.reserved}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.reserved}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.spend_qualified_indicator}: " title="#{lblVis.spend_qualified_indicator}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.spendQualifiedInd}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblOpr.oper_surcharge_amount}: " title="#{lblOpr.oper_surcharge_amount}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.surchargeAmount}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblVis.surcharge_sign}: " title="#{lblVis.surcharge_sign}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{MbVisaSmsReports.activeItem.surchargeSign}"/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblCom.institution}: " title="#{lblCom.institution}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel rendered="#{MbVisaSmsReports.activeItem.instId != null}"
                                       value="#{MbVisaSmsReports.activeItem.instId} - #{MbVisaSmsReports.activeItem.instName}"/>
                        <h:outputLabel rendered="#{MbVisaSmsReports.activeItem.instId == null}" value=""/>
                    </rich:column>

                    <rich:column breakBefore="true">
                        <h:outputLabel value="#{lblCom.language}: " title="#{lblCom.language}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputLabel value="#{DictUtils.articles[MbVisaSmsReports.activeItem.lang]}"/>
                    </rich:column>
                </rich:columnGroup>
            </rich:dataTable>

            <script>setDetailsState("detailsForm:detailsTable");</script>
        </h:panelGroup>
    </h:form>
</ui:composition>
</html>
