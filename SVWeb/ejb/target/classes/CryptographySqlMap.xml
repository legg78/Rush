<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="crypto">
    <parameterMap class="java.util.Map" id="get-sign-data-map">
    	<parameter property="bin_id" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN"/>
    	<parameter property="data" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN"/>
    	<parameter property="signed-data" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT"/>
    	<parameter property="certificate" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT"/>
    	<parameter property="root_certificate" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT"/>
    	<parameter property="intermediate_cert" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT"/>
    </parameterMap>
    
	<procedure id="get-sign-data"
			parameterMap="get-sign-data-map">
		{call ECM_API_ACS_PKG.sign_data(
			      i_bin_id				=> ?
        		, i_data					=> ?
		        , o_signed_data				=> ?
		        , o_certificate				=> ?
		        , o_root_certificate		=> ?
		        , o_intermediate_cert		=> ?
		)}
	</procedure>
	
	<parameterMap class="java.util.Map" id="get-acs-public-key-map">
		<parameter property="key" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT"/>
    	<parameter property="bin_id" javaType="java.lang.Long" jdbcType="NUMERIC" mode="IN"/>
	</parameterMap>	
	
	<procedure id="get-acs-public-key"
			parameterMap="get-acs-public-key-map">
		{? = call ECM_API_ACS_PKG.get_acs_public_key(
			       i_bin_id				=> ?
		)}
	</procedure>
</sqlMap>