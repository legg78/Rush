<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:bm="http://www.bpc.ru/jsf/misc">
<ui:composition>

	<h:form id="questionariesTableForm">
		<h:panelGroup styleClass="search_result_block" layout="block">
			<h:panelGroup styleClass="search_result_block_left fix-ff" layout="block">
				<h:panelGroup id="questionariesTableWrapper" layout="block"
				              styleClass="search_result_block_inner">
					<rich:extendedDataTable id="questionariesTable"
					                        tableState="#{MbSurveyQuestionariesSearch.tableState}"
					                        styleClass="res-table"
					                        headerClass="res-table-header"
					                        rowClasses=",odd"
					                        selectedClass="res-table-selected"
					                        var="item"
					                        value="#{MbSurveyQuestionariesSearch.dataModel}"
					                        selection="#{MbSurveyQuestionariesSearch.itemSelection}"
					                        rows="#{MbSurveyQuestionariesSearch.rowsNum}"
					                        height="255px"
					                        selectionMode="single"
					                        noDataLabel="#{MbSurveyQuestionariesSearch.searching ? lblCommon['no_records_found'] : lblCommon['enter_search_criteria_above']}">

						<a4j:support event="onselectionchange" eventsQueue="queue"
						             reRender="questionariesTableButtons, #{MbSurveyQuestionariesSearch.tabName}" ajaxSingle="true" limitToList="true"/>

						<rich:column id="id" sortBy="#{'id'}" width="10%">
							<f:facet name="header">
								<a4j:outputPanel layout="none">
									<script>updateHeight();</script>
									<h:outputText value="#{lblCommon.id}" title="#{lblCommon.id}"/>
								</a4j:outputPanel>
							</f:facet>
							<h:outputText value="#{item.id}"/>
						</rich:column>

						<rich:column id="number" width="20%" sortBy="#{'questionaryNumber'}">
							<f:facet name="header">
								<h:outputText value="#{lblCommon.number}" title="#{lblCommon.number}"/>
							</f:facet>
							<h:outputText value="#{item.questionaryNumber}"/>
						</rich:column>

						<rich:column id="instId" width="20%" sortBy="#{'instId'}">
							<f:facet name="header">
								<h:outputText value="#{lblCommon.institution}" title="#{lblCommon.institution}"/>
							</f:facet>
							<h:outputLabel value="#{DictUtils.institutesMap[item.instId.toString()]}"
							               title="#{DictUtils.institutesMap[item.instId.toString()]}"/>
						</rich:column>

						<rich:column id="entityType" width="15%" sortBy="#{'entityType'}">
							<f:facet name="header">
								<h:outputText value="#{lblCommon.entity_type}" title="#{lblCommon.entity_type}" />
							</f:facet>
							<h:outputLabel value="#{item.entityType} - #{item.entityTypeName}"
							               title="#{item.entityType} - #{item.entityTypeName}"/>
						</rich:column>

						<rich:column id="status" width="20%" sortBy="#{'questionaryStatus'}">
							<f:facet name="header">
								<h:outputText value="#{lblCommon.status}" title="#{lblCommon.status}" />
							</f:facet>
							<h:outputLabel value="#{item.questionaryStatus} - #{item.questionaryStatusName}"
							               title="#{item.questionaryStatus} - #{item.questionaryStatusName}"/>
						</rich:column>

						<rich:column id="creationDate" width="15%" sortBy="#{'creationDate'}">
							<f:facet name="header">
								<h:outputText value="#{lblCommon.creation_date}" title="#{lblCommon.status}" />
							</f:facet>
							<h:outputLabel value="#{item.creationDate}"
							               title="#{item.creationDate}">
								<f:convertDateTime pattern="#{usession.fullDatePattern}"
								                   timeZone="#{CommonUtils.timeZone}" />
							</h:outputLabel>
						</rich:column>
					</rich:extendedDataTable>
				</h:panelGroup>
				<a4j:outputPanel ajaxRendered="true">
					<h:panelGroup id="show_more_panel" styleClass="show-more-vert show-more-result-tab" layout="block"/>
					<h:graphicImage url="/_img/hd_searchblock.gif" styleClass="hd-searchblock"/>
					<h:panelGroup styleClass="collapse-vert table-collapse-vert" layout="block"/>
				</a4j:outputPanel>
			</h:panelGroup>
		</h:panelGroup>
	</h:form>
</ui:composition>
</html>
