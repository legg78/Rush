<?xml version="1.0" encoding="UTF-8" ?>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:fmt="http://www.bpc.ru/el/formatter"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:composition>
    <h:panelGroup layout="block" id="dinAddendumTab">
        <f:loadBundle var="lblVis" basename="ru.bpc.sv2.ui.bundles.Cst"/>
        <f:loadBundle var="lblSec" basename="ru.bpc.sv2.ui.bundles.Sec"/>
        <f:loadBundle var="lblCrd" basename="ru.bpc.sv2.ui.bundles.Crd"/>
        <f:loadBundle var="lblCrp" basename="ru.bpc.sv2.ui.bundles.Crp"/>
        <f:loadBundle var="lblAcq" basename="ru.bpc.sv2.ui.bundles.Acq"/>
        <f:loadBundle var="lblPmo" basename="ru.bpc.sv2.ui.bundles.Pmo"/>
        <f:loadBundle var="lblAcc" basename="ru.bpc.sv2.ui.bundles.Acc"/>
        <f:loadBundle var="lblCst" basename="ru.bpc.sv2.ui.bundles.Cst"/>

        <h:panelGrid columns="2" cellpadding="0"
                     style="width:100%; overflow-y: auto;overflow-x: hidden;position:relative;">
            <h:form id="dinAddendumDetailsForm">
                <h:panelGroup layout="block" id="dinAddendumDetailsWrapper"
                              style="padding:0px;margin:0px;">
                    <h:outputLabel value="Addendum messages:"/>
                    <rich:extendedDataTable id="dinAddendumDetailsTable"
                                            styleClass="res-table"
                                            headerClass="res-table-header"
                                            selectedClass="res-table-selected"
                                            var="addendum"
                                            value="#{MbDinAddendumSearchBottom.items}"
                                            selection="#{MbDinAddendumSearchBottom.selection}"
                                            selectionMode="single"
                                            width="100%"
                                            noDataLabel="#{MbDinAddendumSearchBottom.searching
                                                           ? lblCommon.no_records_found
                                                           : lblCommon.enter_search_criteria_above}">
                        <a4j:support event="onselectionchange"
                                     reRender="dinAddendumDetailsDataTable"
                                     limitToList="true" />

                        <rich:column id="id" label="#{'ID'}" width="20%">
                            <f:facet name="header">
                                <h:outputText value="#{'ID'}" title="#{'ID'}" />
                            </f:facet>
                            <h:outputText value="#{addendum.id}" title="#{addendum.id}"/>
                        </rich:column>

                        <rich:column id="type" label="#{'Type'}" width="10%">
                            <f:facet name="header">
                                <h:outputText value="#{'Type'}" title="#{'Type'}" />
                            </f:facet>
                            <h:outputText value="#{addendum.funcCode}" />
                        </rich:column>

                        <rich:column id="desc" label="#{'Type description'}" width="40%">
                            <f:facet name="header">
                                <h:outputText value="#{'Type description'}" title="#{'Description'}" />
                            </f:facet>
                            <h:outputText value="#{addendum.funcCodeDesc}" />
                        </rich:column>

                        <rich:column id="file" label="#{'File ID'}" width="20%">
                            <f:facet name="header">
                                <h:outputText value="#{'File ID'}" title="#{'File ID'}" />
                            </f:facet>
                            <h:outputText value="#{addendum.fileId}" />
                        </rich:column>

                        <rich:column id="record" label="#{'Record'}" width="10%">
                            <f:facet name="header">
                                <h:outputText value="#{'Record'}" title="#{'Record'}" />
                            </f:facet>
                            <h:outputText value="#{addendum.recordNumber}" />
                        </rich:column>
                    </rich:extendedDataTable>
                </h:panelGroup>
            </h:form>

            <h:form id="dinAddendumDetailsDataForm">
                <h:panelGroup layout="block" id="dinAddendumDetailsDataWrapper"
                              style="padding:0px;margin:0px;">
                    <h:outputLabel value="Selected addendum data:"/>
                    <rich:extendedDataTable id="dinAddendumDetailsDataTable"
                                            value="#{MbDinAddendumSearchBottom.activeItem.fields}"
                                            var="field"
                                            selectionMode="single"
                                            styleClass="res-table"
                                            width="100%">
                        <rich:column id="field" label="#{'Field'}" width="15%">
                            <f:facet name="header">
                                <h:outputText value="#{'Field'}" title="#{'Field'}" />
                            </f:facet>
                            <h:outputText value="#{field.name}" title="#{field.name}"/>
                        </rich:column>

                        <rich:column id="description" label="#{'Description'}" width="35%">
                            <f:facet name="header">
                                <h:outputText value="#{'Description'}" title="#{'Description'}" />
                            </f:facet>
                            <h:outputText value="#{field.description}" title="#{field.description}"/>
                        </rich:column>

                        <rich:column id="value" label="#{'Value'}" width="50%">
                            <f:facet name="header">
                                <h:outputText value="#{'Value'}" title="#{'Value'}" />
                            </f:facet>
                            <h:outputText value="#{field.value}" title="#{field.value}"/>
                        </rich:column>
                    </rich:extendedDataTable>
                </h:panelGroup>
            </h:form>
        </h:panelGrid>
    </h:panelGroup>
</ui:composition>
</html>
