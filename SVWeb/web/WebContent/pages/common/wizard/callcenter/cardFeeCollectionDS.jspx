<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:bpct="http://www.bpc.ru/jsf/tiles" xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext"
      xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j"
      xmlns:bpc="http://www.bpc.ru/jsf/misc">
<ui:composition template="./cardDetailsTemplate.jspx">
    <ui:define name="stepContent">
        <f:loadBundle var="lblCommon" basename="ru.bpc.sv2.ui.bundles.Common" />
        <f:loadBundle var="lblOpr" basename="ru.bpc.sv2.ui.bundles.Opr" />
        <f:loadBundle var="lblPrs" basename="ru.bpc.sv2.ui.bundles.Prs" />

        <h:form id="cardStatusDataForm">
            <ui:include src="/pages/common/wizard/commonWizardActions.jspx">
                <ui:param name="bean" value="#{bean}" />
                <ui:param name="action" value="#{action}" />
            </ui:include>

            <h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
                <h:panelGrid columns="2" styleClass="cardholderdata"
                             columnClasses="width-150, width250">

                    <h:outputLabel for="reasons" title="#{lblCommon.reason}"
                                   value="* #{lblCommon.reason}:" />

                    <h:panelGrid columns="1" cellpadding="0" cellspacing="0">
                        <h:selectOneMenu id="reasons" onblur="hideErrorField(this)" required="true"
                                         value="#{MbFeeCollectionDS.reason}" label="#{lblCommon.reason}">
                            <f:selectItem itemValue="" />
                            <f:selectItems value="#{MbFeeCollectionDS.reasons}" />
                        </h:selectOneMenu>

                        <h:message for="reasons" styleClass="errorMarker" />
                    </h:panelGrid>

                    <h:outputLabel value="* #{lblCommon.currency}: "
                                   title="#{lblCommon.currency}" />
                    <h:panelGrid columns="1" cellpadding="0" cellspacing="0">
                        <h:selectOneMenu id="currency" value="#{MbFeeCollectionDS.currency}"
                                         required="true" label="#{lblCommon.currency}">
                            <f:selectItem itemValue="" />
                            <f:selectItems value="#{MbFeeCollectionDS.currencies}" />
                            <a4j:support event="onchange" reRender="amountGroup"
                                         limitToList="true" ajaxSingle="true" />
                        </h:selectOneMenu>
                        <h:message for="currency" styleClass="errorMarker" />
                    </h:panelGrid>

                    <h:outputLabel for="amount" title="#{lblAcc.amount}"
                                   value="* #{lblAcc.amount}:" />
                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0"
                                 id="amountGroup">
                        <h:inputText id="amount" value="#{MbFeeCollectionDS.amount}"
                                     required="true" label="#{lblAcc.amount}">
                            <bpc:numericMaskConverter numericType="bigdecimal" />
                            <f:attribute name="decDigits"
                                         value="#{CurrencyUtils.currencyObjectsMap[MbFeeCollectionDS.currency].exponent}" />
                        </h:inputText>
                        <bpc:jsMask for="amount"
                                    decDigits="#{CurrencyUtils.currencyObjectsMap[MbFeeCollectionDS.currency].exponent}" />
                        <h:message for="amount" styleClass="errorMarker" />
                    </h:panelGrid>

                    <h:outputLabel value="#{lblOpr.oper_date}:" />
                    <h:panelGrid columns="1">
                            <rich:calendar id="dateFrom" datePattern="#{usession.fullDatePattern}"
                                           timeZone="#{CommonUtils.timeZone}" zindex="1000"
                                           value="#{MbFeeCollectionDS.dateOper}" />
                    </h:panelGrid>

                </h:panelGrid>
            </h:panelGroup>

        </h:form>
    </ui:define>
</ui:composition>
</html>
