<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
>
<ui:composition>
	<h:form>
		<a4j:jsFunction name="storeTab" ajaxSingle="true" limitToList="true" requestDelay="500"
		                ignoreDupResponses="true" eventsQueue="queue" reRender="err_ajax, #{MbSurveyParametersSearch.tabName}">
			<a4j:actionparam name="tabName" assignTo="#{MbSurveyParametersSearch.tabName}"/>
		</a4j:jsFunction>
	</h:form>

	<h:panelGroup styleClass="workplace" layout="block" id="workplacePanel">
		<rich:tabPanel switchType="client" id="details" tabClass="tab-cell"
		               activeTabClass="active-tab-cell" headerClass="tabs" headerSpacing="0px"
		               contentClass="tab-content" selectedTab="#{MbSurveyParametersSearch.tabName}">

			<rich:tab ontabenter="storeTab('detailsTab')" label="Details" name="detailsTab">
				<f:facet name="label">
					<h:panelGroup styleClass="tab-label" layout="block">
						<h:outputText value="#{lblCommon.details}" title="#{lblCommon.details}"/>
					</h:panelGroup>
				</f:facet>

				<h:panelGroup id="detailsTab" layout="block">
					<ui:include src="survey_parameters_item_details.jspx">
						<ui:param name="activeItem" value="#{MbSurveyParametersSearch.activeItem}"/>
					</ui:include>
				</h:panelGroup>
			</rich:tab>

			<rich:tab ontabenter="storeTab('entityTab')" label="Entities" name="entityTab" style="height:100%;">
				<f:facet name="label">
					<h:panelGroup styleClass="tab-label" layout="block">
						<h:outputText value="#{lblCommon.entities}" title="#{lblCommon.entities}"/>
					</h:panelGroup>
				</f:facet>

				<h:panelGroup id="entityTab" layout="block" styleClass="carddata-wrapper"
				              style="height: 100%;overflow:hidden;position:relative;">
					<ui:include src="survey_parameters_tabs_entities.jspx"></ui:include>
				</h:panelGroup>

			</rich:tab>

		</rich:tabPanel>
	</h:panelGroup>

	<script>
        //<![CDATA[
        function updateHeight(){
            updateGridHeight();
        }

        layout =
            {
                SEARCH_FORM_ID:                 'surveyParametersSearchForm',
                SEARCH_RESULT_FORM_ID:          'surveyParametersTableForm',
                SEARCH_RESULT_FORM_WRAPPER_ID:  'surveyParametersTableWrapper',
                SEARCH_RESULT_FOOTER_FORM_ID:   'surveyParametersTableButtonsForm',
                TAB_PANEL_ID:                   'workplacePanel',

                TAB_DATA: [{
	                    TAB_FORM_ID:            'surveyParametersDetailsForm',
	                    TAB_FORM_WRAPPER_ID:    'surveyParametersDetailsWrapper',
	                    CORRECTING_HEIGHT:      Stretch.TABS + Stretch.BUTTONS
	                },{
	                    TAB_FORM_ID:            'surveyParameterEntitiesForm',
	                    TAB_FORM_WRAPPER_ID:    'surveyParameterEntitiesWrapper',
	                    CORRECTING_HEIGHT:      Stretch.TABS + Stretch.BUTTONS
	                },]

            };
        jQuery(window).resize(updateHeight);

        updateHeight();
        //]]>
	</script>
</ui:composition>
</html>
