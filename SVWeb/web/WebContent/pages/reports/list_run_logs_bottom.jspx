<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:bm="http://www.bpc.ru/jsf/misc"
	xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext">
<ui:composition>
	<f:loadBundle var="lblRpt" basename="ru.bpc.sv2.ui.bundles.Rpt" />
	<f:loadBundle var="lblPrc" basename="ru.bpc.sv2.ui.bundles.Process" />

	<h:form id="reportLogsForm">
	
		<h:panelGroup id="logsTableWrapper" layout="block"
			style="padding:0px;margin:0px;">
			<rich:extendedDataTable headerClass="res-table-header table-header-ext"
				selectedClass="res-table-selected" styleClass="res-table"
				rowClasses=",odd" id="mainTable" var="item"
				value="#{MbReportRunLogsSearch.logs}"
				rows="#{MbReportRunLogsSearch.rowsNum}"
				selection="#{MbReportRunLogsSearch.itemSelection}"
				height="178px" selectionMode="single" enableContextMenu="false"
				tableState="#{MbReportRunLogsSearch.tableState}"
				noDataLabel="#{lblCommon['no_records_found']}">
				
				<a4j:support event="onselectionchange" />
				<rich:column id="id" label="#{lblCommon.id}" title="Id" sortBy="#{'objectId'}" width="5%">
					<f:facet name="header">
						<a4j:outputPanel layout="none">
							<script>updateHeight();</script>
							<h:outputText value="#{lblCommon.id}" title="#{lblCommon.id}" />
						</a4j:outputPanel>
					</f:facet>
					<h:outputText value="#{item.objectId}" title="#{item.objectId}" />
				</rich:column>

				<rich:column id="text" label="#{lblCommon.text}" title="Text" width="25%">
					<f:facet name="header">
						<h:outputText value="#{lblCommon.text}"
							title="#{lblCommon.text}" />
					</f:facet>
					<h:outputText value="#{item.text}"
					  title="#{item.text}"/>
				</rich:column>

				<rich:column id="user_id" label="#{lblCommon.user_id}" title="User Id" width="10%"
					sortBy="#{'userId'}">
					<f:facet name="header">
						<h:outputText value="#{lblPrc.user_id}"
							title="#{lblPrc.user_id}" />
					</f:facet>
					<h:outputText value="#{item.userId}"
						title="#{item.userId}" />
				</rich:column>
				
				<rich:column id="session_id" label="#{lblCommon.session_id}" title="Session Id" width="10%"
					sortBy="#{'sessionId'}">
					<f:facet name="header">
						<h:outputText value="#{lblCommon.session_id}"
							title="#{lblCommon.session_id}" />
					</f:facet>
					<h:outputText value="#{item.sessionId}"
						title="#{item.sessionId}" />
				</rich:column>
							
				<rich:column id="trace_text" label="#{lblPrc.trace_text}" title="Trace text" width="30%"
					>
					<f:facet name="header">
						<h:outputText value="#{lblPrc.trace_text}"
							title="#{lblPrc.trace_text}" />
					</f:facet>
					<h:outputText value="#{item.traceText}"
						title="#{item.traceText}" />
				</rich:column>
				
				<rich:column id="trace_level" label="#{lblPrc.trace_level}" title="Trace level" width="10%"
					>
					<f:facet name="header">
						<h:outputText value="#{lblPrc.trace_level}"
							title="#{lblPrc.trace_level}" />
					</f:facet>
					<h:outputText value="#{item.traceLevel}"
						title="#{item.traceLevel}" />
				</rich:column>
				
				<rich:column id="trace_time_stamp" label="#{lblPrc.trace_timestamp}" 
					title="Trace time stape" width="10%"
					>
					<f:facet name="header">
						<h:outputText value="#{lblPrc.trace_timestamp}"
							title="#{lblPrc.trace_timestamp}" />
					</f:facet>
					<h:outputText value="#{item.traceTimeStape}"
						title="#{item.traceTimeStape}" />
				</rich:column>

			</rich:extendedDataTable>
		</h:panelGroup>
		<h:panelGroup layout="block" styleClass="bottom_search_result_block_buttons">
				<h:panelGroup layout="block" styleClass="bottom_search_result_left_buttons">
					<h:panelGroup layout="block" styleClass="table_tools">
						<h:panelGrid styleClass="fw field-cont" columns="4"
							columnClasses="per-page-lbl,per-page-sel,nav-cont,pagecount">
							<h:outputLabel for="rows_num" value="#{lblCommon.rows_per_page}"
								title="#{lblCommon.rows_per_page}" />
							<h:selectOneMenu id="rows_num" value="#{MbReportRunLogsSearch.rowsNum}"
									style="width:40px">
								<a4j:support event="onchange" limitToList="true"
										reRender="mainTable, dslogs, pagesNum"/>
								<f:selectItems value="#{CommonUtils.rowNumsList}" />
							</h:selectOneMenu>

							<rich:datascroller maxPages="10" fastControls="hide"
									pagesVar="pages" styleClass="res-datascroller" 
									id="dslogs" for="mainTable" 
									reRender="mainTable">
								<f:facet name="first">
									<h:outputText value="&lt;&lt;" styleClass="prev-next" />
								</f:facet>
								<f:facet name="first_disabled">
									<h:outputText value="&lt;&lt;" styleClass="prev-next-dis" />
								</f:facet>
								<f:facet name="last">
									<h:outputText value="&gt;&gt;" styleClass="prev-next" />
								</f:facet>
								<f:facet name="last_disabled">
									<h:outputText value="&gt;&gt;" styleClass="prev-next-dis" />
								</f:facet>
								<f:facet name="previous">
									<h:outputText value="#{lblCommon.prev}" styleClass="prev-next" />
								</f:facet>
								<f:facet name="previous_disabled">
									<h:outputText value="#{lblCommon.prev}"
										styleClass="prev-next-dis" />
								</f:facet>
								<f:facet name="next">
									<h:outputText value="#{lblCommon.next}" styleClass="prev-next" />
								</f:facet>
								<f:facet name="next_disabled">
									<h:outputText value="#{lblCommon.next}"
										styleClass="prev-next-dis" />
								</f:facet>
								<f:facet name="pages">
								</f:facet>
							</rich:datascroller>

							<h:panelGroup id="pagesNum">
								<h:outputText styleClass="strongClass" value="#{pages} " />
								<h:outputText value=" #{lblCommon.pages}" />
							</h:panelGroup>
						</h:panelGrid>
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>

		
	</h:form>

</ui:composition>
</html>
