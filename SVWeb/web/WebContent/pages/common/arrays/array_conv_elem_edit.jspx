<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext">

<ui:composition>
	<script type="text/javascript">
		//<![CDATA[
		function checkConvELemFields() {
			var checked = true;
			if (document.getElementById('element_modal_div:inArrayId') != null
					&& document.getElementById('element_modal_div:inArrayId').value == "") {
				document.getElementById('element_modal_div:inArrayIdError').style.display = "inline";
				checked = false;
			}
			if (document.getElementById('element_modal_div:inLovId') != null
					&& document.getElementById('element_modal_div:inLovId').value == "") {
				document.getElementById('element_modal_div:inLovIdError').style.display = "inline";
				checked = false;
			}
			if (document.getElementById('element_modal_div:outArrayId') != null
					&& document.getElementById('element_modal_div:outArrayId').value == "") {
				document.getElementById('element_modal_div:outArrayIdError').style.display = "inline";
				checked = false;
			}
			if (document.getElementById('element_modal_div:outLovId') != null
					&& document.getElementById('element_modal_div:outLovId').value == "") {
				document.getElementById('element_modal_div:outLovIdError').style.display = "inline";
				checked = false;
			}

			return checked;
		}
		//]]>
	</script>

	<rich:modalPanel id="element_modal_panel" autosized="true"
			minWidth="300" minHeight="120">
		<f:facet name="header">
			<h:panelGroup id="element_modal_header">
				<h:outputText value="#{lblCommon.new_array_conv_elem}"
						rendered="#{MbArrayConvElems.newMode}"/>
				<h:outputText value="#{lblCommon.edit_array_conv_elem}"
						rendered="#{MbArrayConvElems.editMode}"/>
			</h:panelGroup>
		</f:facet>
		<f:facet name="controls">
		</f:facet>
		<h:form id="element_modal_div">
			<h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
				<h:panelGrid columns="2" styleClass="cardholderdata" width="100%"
						columnClasses="firstColModal,width250">
					<h:outputLabel value="#{lblCommon.conversion_id}: " title="#{lblCommon.conversion_id}" />
					<h:inputText value="#{MbArrayConvElems.newElement.convId}"
							readonly="true" styleClass="grayInput" />

					<h:outputLabel value="* #{lblCommon.in_element_value}: " title="#{lblCommon.in_element_value}"
							rendered="#{MbArrayConvElems.conversion.inArrayId != null}"/>
					<h:panelGrid columns="1" cellspacing="0" cellpadding="0"
							rendered="#{MbArrayConvElems.conversion.inArrayId != null}">
            			<h:selectOneMenu id="inArrayId"
            					value="#{MbArrayConvElems.newElement.inElementValue}"
            					label="#{lblCommon.in_element_value}"
            					onblur="hideErrorField(this)">
							<f:selectItem itemValue=""/>
		      				<f:selectItems value="#{MbArrayConvElems.inArray}"/>
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
								id="inArrayIdError" style="display:none;">
							<f:param name="fieldName" value="#{lblCommon.in_element_value}"/>
						</h:outputFormat>
           			</h:panelGrid>
           			
           			<h:outputLabel value="* #{lblCommon.in_element_value}: " title="#{lblCommon.in_element_value}"
           					rendered="#{MbArrayConvElems.conversion.inLovId != null}"/>
					<h:panelGrid columns="1" cellspacing="0" cellpadding="0"
							rendered="#{MbArrayConvElems.conversion.inLovId != null}">
            			<h:selectOneMenu id="inLovId"
            					value="#{MbArrayConvElems.newElement.inElementValue}"
            					label="#{lblCommon.in_element_value}"
            					onblur="hideErrorField(this)">
            				<f:selectItem itemValue=""/>
		      				<f:selectItems value="#{MbArrayConvElems.inLov}"/>
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
								id="inLovIdError" style="display:none;">
							<f:param name="fieldName" value="#{lblCommon.in_element_value}"/>
						</h:outputFormat>
           			</h:panelGrid>
           			
           			<h:outputLabel value="* #{lblCommon.out_element_value}: " title="#{lblCommon.out_element_value}"
           					rendered="#{MbArrayConvElems.conversion.outArrayId != null}"/>
					<h:panelGrid columns="1" cellspacing="0" cellpadding="0"
							rendered="#{MbArrayConvElems.conversion.outArrayId != null}">
            			<h:selectOneMenu id="outArrayId"
            					value="#{MbArrayConvElems.newElement.outElementValue}"
            					label="#{lblCommon.out_element_value}"
            					onblur="hideErrorField(this)">
							<f:selectItem itemValue=""/>
		      				<f:selectItems value="#{MbArrayConvElems.outArray}"/>
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
								id="outArrayIdError" style="display:none;">
							<f:param name="fieldName" value="#{lblCommon.out_element_value}"/>
						</h:outputFormat>
           			</h:panelGrid>
           			
           			<h:outputLabel value="* #{lblCommon.out_element_value}: " title="#{lblCommon.out_element_value}"
           					rendered="#{MbArrayConvElems.conversion.outLovId != null}"/>
					<h:panelGrid columns="1" cellspacing="0" cellpadding="0"
							rendered="#{MbArrayConvElems.conversion.outLovId != null}">
            			<h:selectOneMenu id="outLovId"
            					value="#{MbArrayConvElems.newElement.outElementValue}"
            					label="#{lblCommon.out_element_value}"
            					onblur="hideErrorField(this)">
            				<f:selectItem itemValue=""/>
		      				<f:selectItems value="#{MbArrayConvElems.outLov}"/>
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
								id="outLovIdError" style="display:none;">
							<f:param name="fieldName" value="#{lblCommon.out_element_value}"/>
						</h:outputFormat>
           			</h:panelGrid>
				</h:panelGrid>
			</h:panelGroup>

			<h:panelGroup layout="block"
					styleClass="bottom_search_result_block_buttons">
				<h:panelGroup layout="block"
						styleClass="bottom_search_result_left_buttons">
					<h:panelGrid columns="3" columnClasses="width99P,,paddingR12">
						<h:outputText />
						<bre:taggedCommandButton value="#{lblForm.save}" type="submit"
								action="#{MbArrayConvElems.save}"
								onclick="if (!checkConvELemFields()) return false; disableModalPanelBtns(this)"
								oncomplete="enableModalPanelBtns(this); if (#{usession.noErrorResponse}) #{rich:component('element_modal_panel')}.hide()"
								reRender="convElementsForm:elementsTable, convElementsForm:btnPanel" />
						<bre:taggedCommandButton value="#{lblForm.cancel}"
								action="#{MbArrayConvElems.close}" immediate="true"
								oncomplete="#{rich:component('element_modal_panel')}.hide()" />
					</h:panelGrid>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</rich:modalPanel>
</ui:composition>
</html>