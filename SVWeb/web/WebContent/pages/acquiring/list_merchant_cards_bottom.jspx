<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:bm="http://www.bpc.ru/jsf/misc"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext">
<ui:composition>
    <f:loadBundle var="lblAcq" basename="ru.bpc.sv2.ui.bundles.Acq"/>
    <f:loadBundle var="lblCrd" basename="ru.bpc.sv2.ui.bundles.Crd"/>
    <f:loadBundle var="lblIss" basename="ru.bpc.sv2.ui.bundles.Iss"/>
    <f:loadBundle var="lblOst" basename="ru.bpc.sv2.ui.bundles.Ost"/>
    <f:loadBundle var="lblPrd" basename="ru.bpc.sv2.ui.bundles.Prd"/>
    <f:loadBundle var="lblReject" basename="ru.bpc.sv2.ui.bundles.Reject"/>

    <h:form id="merchantCardsForm">
        <h:panelGroup id="merchantCardsWrapper"
                      layout="block"
                      styleClass="carddata-wrapper"
                      style="height: 100%; overflow-y: auto;overflow-x: hidden;position:relative;">
            <rich:extendedDataTable id="merchantCardsTable"
                                    value="#{MbMerchantCards.cards}"
                                    selection="#{MbMerchantCards.selection}"
                                    var="item"
                                    selectionMode="single"
                                    styleClass="res-table"
                                    headerClass="res-table-header table-header-ext"
                                    rowClasses=",odd"
                                    selectedClass="res-table-selected"
                                    enableContextMenu="true"
                                    tableState="#{MbMerchantCards.tableState}"
                                    rows="0"
                                    noDataLabel="#{lblCommon['no_records_found']}"
                                    height="220px"
                                    width="100%">
                <!--@elvariable id="item" type="ru.bpc.sv2.issuing.Card"-->

                <rich:column id="card_uid" width="10%"
                             label="#{lblCrd.card_uid}" title="#{lblCrd.card_uid}"
                             sortBy="#{'cardUid'}">
                    <f:facet name="header">
                        <h:outputText value="#{lblCrd.card_uid}" title="#{lblCrd.card_uid}"/>
                    </f:facet>

                    <h:outputText value="#{item.cardUid}" title="#{item.cardUid}"/>
                </rich:column>

                <rich:column id="card_mask" width="10%"
                             label="#{lblCrd.card_mask}" title="#{lblCrd.card_mask}"
                             sortBy="#{'cardMask'}">
                    <f:facet name="header">
                        <h:outputText value="#{lblCrd.card_mask}" title="#{lblCrd.card_mask}"/>
                    </f:facet>

                    <h:outputText value="#{item.mask}" title="#{item.mask}"/>
                </rich:column>

                <rich:column id="card_type" width="12%"
                             label="#{lblIss.card_type}" title="#{lblIss.card_type}"
                             sortBy="#{'cardTypeId'}">
                    <f:facet name="header">
                        <h:outputText value="#{lblIss.card_type}" title="#{lblIss.card_type}"/>
                    </f:facet>

                    <h:outputText rendered="#{item.cardTypeId != null}"
                                  value="#{item.cardTypeId} - #{item.cardTypeName}"
                                  title="#{item.cardTypeId} - #{item.cardTypeName}"/>
                    <h:outputText rendered="#{item.cardTypeId == null}" value="" title=""/>
                </rich:column>

                <rich:column id="cardholder_name" width="19%"
                             label="#{lblIss.cardholder_name}" title="#{lblIss.cardholder_name}">
                    <f:facet name="header">
                        <h:outputText value="#{lblIss.cardholder_name}" title="#{lblIss.cardholder_name}"/>
                    </f:facet>

                    <h:outputText value="#{item.cardholderName}" title="#{item.cardholderName}"/>
                </rich:column>

                <rich:column id="inst" width="11%"
                             label="#{lblCommon.institution}" title="#{lblCommon.institution}"
                             sortBy="#{'instId'}">
                    <f:facet name="header">
                        <h:outputText value="#{lblCommon.institution}" title="#{lblCommon.institution}"/>
                    </f:facet>

                    <h:outputText rendered="#{item.instId != null}"
                                  value="#{DictUtils.institutesMap[item.instId.toString()]}"
                                  title="#{DictUtils.institutesMap[item.instId.toString()]}"/>
                    <h:outputText rendered="#{item.instId == null}" value="" title=""/>
                </rich:column>

                <rich:column id="account" width="14%"
                             label="#{lblAcc.account}" title="#{lblAcc.account}">
                    <f:facet name="header">
                        <h:outputText value="#{lblAcc.account}" title="#{lblAcc.account}"/>
                    </f:facet>

                    <h:outputText value="#{item.accountNumber}" title="#{item.accountNumber}"/>
                </rich:column>

                <rich:column id="product" width="12%"
                             label="#{lblPrd.product}" title="#{lblPrd.product}"
                             sortBy="#{'productId'}">
                    <f:facet name="header">
                        <h:outputText value="#{lblPrd.product}" title="#{lblPrd.product}"/>
                    </f:facet>

                    <h:outputText rendered="#{item.productId != null}"
                                  value="#{item.productId} - #{item.productName}"
                                  title="#{item.productId} - #{item.productName}"/>
                    <h:outputText rendered="#{item.productId == null}" value="" title=""/>
                </rich:column>

                <rich:column id="reg_date" width="11%"
                             label="#{lblIss.reg_date}" title="#{lblIss.reg_date}">
                    <f:facet name="header">
                        <h:outputText value="#{lblIss.reg_date}" title="#{lblIss.reg_date}"/>
                    </f:facet>

                    <h:outputText value="#{item.regDate}">
                        <f:convertDateTime pattern="#{usession.fullDatePatternSeconds}" timeZone="#{CommonUtils.timeZone}"/>
                    </h:outputText>
                </rich:column>
            </rich:extendedDataTable>
        </h:panelGroup>

        <h:panelGroup layout="block" styleClass="bottom_search_result_block_buttons">
            <h:panelGroup layout="block" styleClass="bottom_search_result_left_buttons">
                <h:panelGrid id="btns" styleClass="fw buttons_block" columns="2" columnClasses=", table_tools_state"/>
            </h:panelGroup>
        </h:panelGroup>
    </h:form>
</ui:composition>
</html>
