<?xml version="1.0" encoding="UTF-8" ?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext" xmlns:fmt="http://www.bpc.ru/el/formatter"
	xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j">
	<ui:composition>
		<h:form id="monitoredAtmDetailsForm1">
			<h:panelGroup id="monitoredAtmDetailsWrapper1" layout="block"
				styleClass="carddata-wrapper"
				style="height: 100%; overflow-y: auto;overflow-x: hidden;position:relative;">
				<rich:dataTable id="monitoredAtmStateDetailsTable"
					value="#{MbAtmMonitoring.emptyTable}" var="field" styleClass="res-table noHeader"
					width="100%">
					<rich:columnGroup rowClasses=",odd"
						columnClasses="firstCol detailsTable alignLeft width20, width25 noPadding, width70 width250 noPadding">
						<rich:column styleClass="detailsCategory expandedBranch">
							<h:graphicImage url="/images/minus.gif" onclick="showHideDetails(this)" />
							<h:outputLabel value="#{lblPrd.general_data}:" />
						</rich:column>
						<rich:column>
							<script>
								updateHeight();
							</script>
						</rich:column>
						<rich:column />

						<rich:column breakBefore="true">
							<h:outputLabel value="#{lblAtm.atm_date}:" title="#{lblAtm.atm_date}" />
						</rich:column>
						<rich:column>
							<h:outputText
								value="#{fmt:formatDate(MbAtmMonitoring.activeItem.atmDate, usession.fullDatePatternSeconds, CommonUtils.timeZoneId)}"
								title="#{fmt:formatDate(MbAtmMonitoring.activeItem.atmDate, usession.fullDatePatternSeconds, CommonUtils.timeZoneId)}" />

						</rich:column>
						<rich:column>
							<bre:taggedCommandButton value="#{lblAtm.send_date_to_atm }"
								disabled="#{MbAtmMonitoring.activeItem == null }" action="#{MbAtmMonitoring.sendDateToAtm}"
								reRender="atmDate" />
						</rich:column>

						<rich:column breakBefore="true">
							<h:outputLabel value="#{lblForm.connection_status}:"
								title="#{lblForm.connection_status}" />
						</rich:column>
						<rich:column>
							<h:panelGrid border="0" columns="2" cellpadding="0"
								cellspacing="0" style="border-collapse:collapse;">
								<div class="default_icon #{EntityIcons.objectsMap['ENTT0047'][MbAtmMonitoring.activeItem.connectionStatus]}"
					                	title="#{DictUtils.articles[MbAtmMonitoring.activeItem.connectionStatus]}"
					                	style="margin-right:6px;"/>
					            <h:outputText
										value="#{DictUtils.articles[MbAtmMonitoring.activeItem.connectionStatus]}"
										id="connStatus"
										title="#{DictUtils.articles[MbAtmMonitoring.activeItem.connectionStatus]}">
								</h:outputText>
							</h:panelGrid>
						</rich:column>
						<rich:column />

						<rich:column breakBefore="true">
							<h:outputLabel value="#{lblAtm.atm_status}:" title="#{lblAtm.atm_status}" />
						</rich:column>
						<rich:column>
							<h:panelGrid border="0" columns="2" cellpadding="0"
								cellspacing="0" style="border-collapse:collapse;">
								<div class="default_icon #{EntityIcons.objectsMap['ASST'][MbAtmMonitoring.activeItem.serviceStatus]}"
					                	title="#{DictUtils.articles[MbAtmMonitoring.activeItem.serviceStatus]}"
					                	style="margin-right:6px;"/>
					            <h:outputText
									value="#{DictUtils.articles[MbAtmMonitoring.activeItem.serviceStatus]}"
									id="serviceStatus"
									title="#{DictUtils.articles[MbAtmMonitoring.activeItem.serviceStatus]}">
								</h:outputText>
							</h:panelGrid>							
						</rich:column>
						<rich:column>
							<h:panelGroup>
								<bre:taggedCommandButton value="#{lblAtm.open_close_atm}"
									disabled="#{MbAtmMonitoring.activeItem == null }" action="#{MbAtmMonitoring.openCloseAtm}"
									oncomplete="alert('#{lblAtm.request_sent}');" />
								<bre:taggedCommandButton id="refreshActiveItem"
									reRender="atmStatus, atmMonitoringResultForm, stateTab" value="#{lblForm.refresh}"
									disabled="#{MbAtmMonitoring.activeItem == null}" action="#{MbAtmMonitoring.updateActiveItem}" />
							</h:panelGroup>
						</rich:column>


						<rich:column breakBefore="true">
							<h:outputLabel value="#{lblAtm.tech_status}:"
								title="#{lblAtm.tech_status}" />
						</rich:column>
						<rich:column>
							<h:panelGrid border="0" columns="2" cellpadding="0"
								cellspacing="0" style="border-collapse:collapse;">
								<div
									class="default_icon #{EntityIcons.objectsMap['ATCS'][MbAtmMonitoring.activeItem.techStatus]}"
									title="#{DictUtils.articles[MbAtmMonitoring.activeItem.techStatus]}"
									style="margin-right:6px;" />
								<h:outputText
									value="#{DictUtils.articles[MbAtmMonitoring.activeItem.techStatus]}"
									id="techStatus"
									title="#{DictUtils.articles[MbAtmMonitoring.activeItem.techStatus]}">
								</h:outputText>
							</h:panelGrid>
						</rich:column>
						<rich:column>
							<h:panelGroup>
								<bre:taggedCommandButton value="#{lblAtm.get_atm_state }"
									disabled="#{MbAtmMonitoring.activeItem == null }" action="#{MbAtmMonitoring.loadAtmState}"
									reRender="techStatus, financeStatus, consumablesStatus, monitoredAtmDetailsForm1" />
							</h:panelGroup>
						</rich:column>

						<rich:column breakBefore="true">
							<h:outputLabel value="#{lblAtm.finance_status}:"
								title="#{lblAtm.finance_status}" />
						</rich:column>
						<rich:column>
							<h:panelGrid border="0" columns="2" cellpadding="0"
								cellspacing="0" style="border-collapse:collapse;">
								<div
									class="default_icon #{EntityIcons.objectsMap['AFCS'][MbAtmMonitoring.activeItem.financeStatus]}"
									title="#{DictUtils.articles[MbAtmMonitoring.activeItem.financeStatus]}"
									style="margin-right:6px;" />
								<h:outputText
									value="#{DictUtils.articles[MbAtmMonitoring.activeItem.financeStatus]}"
									id="financeStatus"
									title="#{DictUtils.articles[MbAtmMonitoring.activeItem.financeStatus]}">
								</h:outputText>
							</h:panelGrid>
						</rich:column>
						<rich:column />

						<rich:column breakBefore="true">
							<h:outputLabel value="#{lblAtm.consumables_status}: "
								title="#{lblAtm.consumables_status}" />
						</rich:column>
						<rich:column>
							<h:panelGrid border="0" columns="2" cellpadding="0"
								cellspacing="0" style="border-collapse:collapse;">
								<div
									class="default_icon #{EntityIcons.objectsMap['AECS'][MbAtmMonitoring.activeItem.consumablesStatus]}"
									title="#{DictUtils.articles[MbAtmMonitoring.activeItem.consumablesStatus]}"
									style="margin-right:6px;" />
								<h:outputText
									value="#{DictUtils.articles[MbAtmMonitoring.activeItem.consumablesStatus]}"
									id="consumablesStatus"
									title="#{DictUtils.articles[MbAtmMonitoring.activeItem.consumablesStatus]}">
								</h:outputText>
							</h:panelGrid>
						</rich:column>
						<rich:column />

					</rich:columnGroup>
				</rich:dataTable>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="bottom_search_result_block_buttons">
				<h:panelGroup layout="block" styleClass="bottom_search_result_left_buttons" >
					<h:panelGrid styleClass="fw buttons_block" columns="2" columnClasses=", table_tools_state">
						<h:panelGroup></h:panelGroup>
							<h:panelGroup>
								<h:graphicImage url="/images/green-tick.png" title="#{lblCommon.save_table_state}" styleClass="action_icon"
									onclick="saveStateTableState();"/>
								<h:graphicImage url="/images/red-cross.png" title="#{lblCommon.delete_table_state}" styleClass="action_icon"
									onclick="deleteStateTableState();"/>
								<a4j:queue name="tablestatequeue"/>
								<a4j:jsFunction name="saveStateTableState" action="#{MbAtmMonitoring.saveTableStateDB}" eventsQueue="tablestatequeue"/>
								<a4j:jsFunction name="deleteStateTableState" action="#{MbAtmMonitoring.deleteTableStateDB}" eventsQueue="tablestatequeue"/>
							</h:panelGroup>
					</h:panelGrid>
				</h:panelGroup>
			</h:panelGroup>
			<ui:remove>
				<h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
					<h:panelGrid columns="2" styleClass="cardholderdata twoColumnTable"
						columnClasses="firstCol,secondCol">


						<h:outputLabel value="#{lblAtm.finance_status}:" />
						<h:inputText value="#{MbAtmMonitoring.activeItem.financeStatusName}"
							id="financeStatus" title="#{MbAtmMonitoring.activeItem.financeStatusName}"
							readonly="true">
						</h:inputText>

						<h:outputLabel value="#{lblAtm.consumables_status}:" />
						<h:inputText value="#{MbAtmMonitoring.activeItem.consumablesStatus}"
							id="consumablesStatus" title="#{MbAtmMonitoring.activeItem.consumablesStatus}"
							readonly="true">
						</h:inputText>

					</h:panelGrid>
				</h:panelGroup>
			</ui:remove>
		</h:form>
	</ui:composition>
</html>