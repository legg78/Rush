<?xml version="1.0" encoding="UTF-8"?>
<html	xmlns="http://www.w3.org/1999/xhtml"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:a4j="http://richfaces.org/a4j"
		xmlns:rich="http://richfaces.org/rich"
		xmlns:bm="http://www.bpc.ru/jsf/misc"
		xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext"
		xmlns:o="http://openfaces.org/">
<ui:composition>
	<h:panelGroup styleClass="search_result_block" layout="block">
   		<h:panelGroup styleClass="search_result_block_left fix-ff" layout="block">
			<h:panelGroup id="mainTableWrapper" layout="block">
			
			<o:treeTable id="agentTypeTreeTable" var="agentType"
					expansionState="allExpanded"
					sortColumnId="shortDesc"
					headerHorizSeparator="1px solid #D7DAC2"
					headerVertSeparator="1px solid #D7DAC2"
					headerSectionClass="res-tree-table-header"
					commonHeaderRowClass="res-tree-table-header"
					sortableHeaderClass="res-tree-table-header"
					sortedColumnHeaderClass="res-tree-table-header"
					sortableHeaderRolloverClass="res-tree-table-header"
					styleClass="res-tree-table"
					bodyOddRowClass="res-tree-table-row odd-tree-table"
					bodyRowClass="res-tree-table-row" headerRowClass="res-tree-table-header"
					cellpadding="0" cellspacing="0"
					preloadedNodes="all"
					 >
				<o:scrolling/>
					
				<f:facet name="noDataMessage">
					<h:panelGroup>
						<h:outputText value="#{lblCommon['no_records_found']}" rendered="#{MbAgentType.searching}"/>
						<h:outputText value="#{lblCommon['enter_search_criteria_above']}" rendered="#{!MbAgentType.searching}"/>
					</h:panelGroup>
				</f:facet>
				
	       		<o:dynamicTreeStructure nodeChildren="#{MbAgentType.nodeChildren}" 
	       				nodeHasChildren="#{MbAgentType.nodeHasChildren}" 
	       				nodeKey="#{agentType.branchId}"
	       				/>

			    <o:singleNodeSelection 
			    	nodeData="#{MbAgentType.node}" 
			    	nodePath="#{MbAgentType.nodePath}"			    
			    	keyboardSupport="false"
			    	styleClass="treetable_selection">
					<a4j:support event="onchange" eventsQueue="queue" 
								reRender="btnsAgentTypes" />
          		</o:singleNodeSelection>

			    <o:treeColumn id="shortDesc" width="30%"
			    		sortingExpression="#{DictUtils.articles[agentType.type]}">
			    	<f:facet name="header">
			        	<a4j:outputPanel layout="none">
							<script>updateHeight();</script>
							<h:outputText value="#{lblCommonQ.name}"/>
						</a4j:outputPanel>
			      	</f:facet>
			      	<h:outputText value="#{DictUtils.allArticles[agentType.type].name}" 
			      			 title="#{DictUtils.allArticles[agentType.type].name}"
			      			styleClass="treeTableText"
			      			rendered="#{DictUtils.articles[agentType.type] != null}"/>
			      	<h:outputText value="#{agentType.type}" 
			      			 title="#{agentType.type}"
			      			styleClass="treeTableText"
			      			rendered="#{DictUtils.articles[agentType.type] == null}"/>
			    </o:treeColumn>

			    <o:column id="fullDesc" styleClass="res-tree-table-cell" width="58%">
			      	<f:facet name="header">
			        	<h:outputText value="#{lblCommonQ.description}"/>
			      	</f:facet>
			      	<h:outputText value="#{DictUtils.allArticles[agentType.type].description}"
			      			title="#{DictUtils.allArticles[agentType.type].description}"/>
			    </o:column>								    
			</o:treeTable>
			</h:panelGroup>
			<a4j:outputPanel ajaxRendered="true">
	           	<h:graphicImage url="/_img/hd_searchblock.gif" styleClass="hd-searchblock"/>
		    	<h:panelGroup styleClass="collapse-vert" layout="block"/>
	    	</a4j:outputPanel>
		</h:panelGroup>
	</h:panelGroup>
</ui:composition>
</html>