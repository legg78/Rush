<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
>
<ui:composition>
	<h:form>
		<a4j:jsFunction name="storeTab" ajaxSingle="true" limitToList="true" requestDelay="500"
		                ignoreDupResponses="true" eventsQueue="queue" reRender="err_ajax, #{MbPmoPaymentOrdersSearch.tabName}">
			<a4j:actionparam name="tabName" assignTo="#{MbPmoPaymentOrdersSearch.tabName}"/>
		</a4j:jsFunction>
	</h:form>

	<h:panelGroup styleClass="workplace" layout="block" id="workplacePanel">
		<rich:tabPanel switchType="client" id="details" tabClass="tab-cell"
		               activeTabClass="active-tab-cell" headerClass="tabs" headerSpacing="0px"
		               contentClass="tab-content" selectedTab="#{MbPmoPaymentOrdersSearch.tabName}">

			<rich:tab ontabenter="storeTab('detailsTab')" label="Details" name="detailsTab">
				<f:facet name="label">
					<h:panelGroup styleClass="tab-label" layout="block">
						<h:outputText value="#{lblCommon.details}" title="#{lblCommon.details}"/>
					</h:panelGroup>
				</f:facet>

				<h:panelGroup id="detailsTab" layout="block">
					<ui:include src="pmo_orders_item_details.jspx">
						<ui:param name="activeItem" value="#{MbPmoPaymentOrdersSearch.activeItem}"/>
					</ui:include>
				</h:panelGroup>
			</rich:tab>

			<rich:tab ontabenter="storeTab('paramsTab')" label="Parameters" name="paramsTab" style="height:100%;">
				<f:facet name="label">
					<h:panelGroup styleClass="tab-label" layout="block">
						<h:outputText value="#{lblCommon.parameters}" title="#{lblCommon.parameters}"/>
					</h:panelGroup>
				</f:facet>

				<h:panelGroup id="paramsTab" layout="block" styleClass="carddata-wrapper"
				              style="height: 100%;overflow:hidden;position:relative;">
					<ui:include src="pmo_orders_tabs_parameters.jspx"></ui:include>
				</h:panelGroup>

			</rich:tab>

			<rich:tab ontabenter="storeTab('linkedObjectsTab')" label="Linked objects" name="linkedObjectsTab" style="height:100%;">
				<f:facet name="label">
					<h:panelGroup styleClass="tab-label" layout="block">
						<h:outputText value="#{lblApp.linked_objects}" title="#{lblApp.linked_objects}"/>
					</h:panelGroup>
				</f:facet>

				<h:panelGroup id="linkedObjectsTab" layout="block" styleClass="carddata-wrapper"
							  style="height: 100%;overflow:hidden;position:relative;">
					<ui:include src="pmo_orders_linked_objects.jspx"></ui:include>
				</h:panelGroup>

			</rich:tab>

		</rich:tabPanel>
	</h:panelGroup>

	<script>
        //<![CDATA[
        function updateHeight(){
            updateGridHeight();
        }

        layout =
            {
                SEARCH_FORM_ID:                 'pmoOrdersSearchForm',
                SEARCH_RESULT_FORM_ID:          'pmoOrdersTableForm',
                SEARCH_RESULT_FORM_WRAPPER_ID:  'pmoOrdersTableWrapper',
                SEARCH_RESULT_FOOTER_FORM_ID:   'pmoOrdersTableButtonsForm',
                TAB_PANEL_ID:                   'workplacePanel',

                TAB_DATA: [{
	                    TAB_FORM_ID:            'pmoOrdersDetailsForm',
	                    TAB_FORM_WRAPPER_ID:    'pmoOrdersDetailsWrapper',
	                    CORRECTING_HEIGHT:      Stretch.TABS + Stretch.BUTTONS
	                },{
	                    TAB_FORM_ID:            'pmoParametersForm',
	                    TAB_FORM_WRAPPER_ID:    'pmoParametersWrapper',
	                    CORRECTING_HEIGHT:      Stretch.TABS + Stretch.BUTTONS
	                },{
						TAB_FORM_ID:            'pmoLinkedObjectsForm',
						TAB_FORM_WRAPPER_ID:    'pmoLinkedObjectsWrapper',
						CORRECTING_HEIGHT:      Stretch.TABS + Stretch.BUTTONS
                	}]

            };
        jQuery(window).resize(updateHeight);

        updateHeight();
        //]]>
	</script>
</ui:composition>
</html>
