<?xml version="1.0" encoding="UTF-8"?>
<html	xmlns="http://www.w3.org/1999/xhtml"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:a4j="http://richfaces.org/a4j"
		xmlns:rich="http://richfaces.org/rich"
		xmlns:bm="http://www.bpc.ru/jsf/misc"
		xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext"
		xmlns:bpct="http://www.bpc.ru/jsf/tiles">
<ui:composition>
	<f:loadBundle var="lblAsc" basename="ru.bpc.sv2.ui.bundles.Asc"/>
	
	<rich:modalPanel id="paramEditPanel" autosized="true" minWidth="200" minHeight="50">
		<f:facet name="header">
         	<h:outputText value="#{lblCommon.edit_param}" />
		</f:facet>
		<f:facet name="controls">
      	</f:facet>
      	<h:panelGroup id="paramEditDiv">
      		<h:form>
				<h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
					<h:panelGrid columns="2" styleClass="cardholderdata" columnClasses="firstColModal nowrap top width250, width200, noWrap">
						<h:outputLabel value="#{MbAuthParams.newParam.description}:" 
								title="#{MbAuthParams.newParam.description}(#{MbAuthParams.newParam.parameterRole})" style="text-overflow: ellipsis; overflow-x: hidden;"/>
						<h:panelGrid columns="1" cellspacing="0" cellpadding="0" 
								rendered="#{MbAuthParams.newParam.lovId == null}">
							<h:inputText style="width: 200px;padding-left:0;padding-right:0" 
									id="charValue" 
									value="#{MbAuthParams.newParam.valueV}"
									required="true" label="#{MbAuthParams.newParam.systemName}"
									rendered="#{MbAuthParams.newParam.char}">
								<a4j:support event="onchange" reRender="charValueError" 
										limitToList="true" ajaxSingle="true"/>
							</h:inputText>
							<h:inputText style="width: 200px;padding-left:0;padding-right:0" 
									id="numberValue" 
									value="#{MbAuthParams.newParam.valueN}"
									required="true" label="#{MbAuthParams.newParam.systemName}"
									rendered="#{MbAuthParams.newParam.number}"
									converterMessage="#{lblMsg.must_be_number}"
									onkeypress="if (!numbersOnly(this, event, true)) return false;"
									>
								<bm:convertNumberNew minFractionDigits="0"/>
								<a4j:support event="onchange" reRender="numberValueError" 
										limitToList="true" ajaxSingle="true"/>
							</h:inputText>
							
							<rich:message for="charValue" 
									id="charValueError"
									styleClass="errorMarker"
									rendered="#{MbAuthParams.newParam.char}"
							/>
							<rich:message for="numberValue" 
									id="numberValueError"
									styleClass="errorMarker"
									rendered="#{MbAuthParams.newParam.number}"
							/>
						</h:panelGrid>
						<h:panelGrid columns="1" cellspacing="0" cellpadding="0" 
								rendered="#{MbAuthParams.newParam.lovId != null}">
							<h:selectOneMenu label="#{MbAuthParams.newParam.systemName}"
									id="charLovValue" style="width: 200px;"
									value="#{MbAuthParams.newParam.valueV}"
									rendered="#{MbAuthParams.newParam.lovId != null and MbAuthParams.newParam.char}"
									>
								<f:selectItem itemValue=""/>
						    	<f:selectItems value="#{MbAuthParams.lov}"/>
							</h:selectOneMenu>
							
							<h:selectOneMenu label="#{MbAuthParams.newParam.systemName}"
									id="numberLovValue" style="width: 200px;"
									value="#{MbAuthParams.newParam.valueN}"
									rendered="#{MbAuthParams.newParam.lovId != null and MbAuthParams.newParam.number}"
									>
								<f:selectItem itemValue=""/>
						    	<f:selectItems value="#{MbAuthParams.lov}"/>
							</h:selectOneMenu>
							<rich:message for="charLovValue" styleClass="errorMarker"
									rendered="#{MbAuthParams.newParam.char}"
							/>
							<rich:message for="numberLovValue" styleClass="errorMarker"
									rendered="#{MbAuthParams.newParam.number}"
							/>
						</h:panelGrid>
					</h:panelGrid>
				</h:panelGroup>
  
	      	    <h:panelGroup layout="block" styleClass="bottom_search_result_block_buttons">
					<h:panelGroup layout="block" styleClass="bottom_search_result_left_buttons">
		       	    	<h:panelGrid columns="3" columnClasses="width99P,,paddingR12">
		       	    		<h:outputText/>
                        	<bre:taggedCommandButton 
                        			value="#{lblForm.save}" type="submit" action="#{MbAuthParams.save}"
                        			reRender="#{rerenderList}"
	                        		oncomplete="if (#{usession.noErrorResponse}) #{rich:component('paramEditPanel')}.hide()" 
	                        		/>
                        	<bre:taggedCommandButton 
	                        		value="#{lblForm.cancel}" 
	                        		action="#{MbAuthParams.cancel}" immediate="true"
	                        		oncomplete="#{rich:component('paramEditPanel')}.hide()" 
	                        		/>
			    		</h:panelGrid>
			    	</h:panelGroup>
			    </h:panelGroup>
			</h:form>
		</h:panelGroup>			    			
	</rich:modalPanel>

</ui:composition>
</html>
