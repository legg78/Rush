<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:bpct="http://www.bpc.ru/jsf/tiles" xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext"
	xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:o="http://openfaces.org/">
	<ui:composition>
	<f:loadBundle var="lblAcc" basename="ru.bpc.sv2.ui.bundles.Acc"/>
	<f:loadBundle var="lblPrd" basename="ru.bpc.sv2.ui.bundles.Prd"/>
		<fieldset onblur="alert(1);">
			<legend>#{MbAppWizAccount.node.label}</legend>
			<h:form>
				<h:panelGrid styleClass="filter-table field-cont twoColumnTable"
					columns="2" columnClasses="column200px,column200px"
					>
				
					<h:outputLabel value="#{lblPrd.linked}:" 
						class="#{MbAppWizAccount.accountValid ? 'valid' : 'invalid'}"/>
					<h:outputLabel value="#{lblPrd.unlinked}:"/>
					
					<h:selectOneListbox id="bindAccs" size="5" style="width:100%"
						value="#{MbAppWizAccount.unbind}">
			   			<a4j:support event="onchange" ignoreDupResponses="true"
							reRender="account" />
			   			<f:selectItems value="#{MbAppWizAccount.bindCard}" />
			   		</h:selectOneListbox>
					
					<h:selectOneListbox id="unbindAccs" size="5" style="width:100%"
						value="#{MbAppWizAccount.bind}">
						<a4j:support event="onchange" ignoreDupResponses="true"
							reRender="account" />
			   			<f:selectItems value="#{MbAppWizAccount.unbindCard}" />
			   		</h:selectOneListbox>
			   		
			   		<bre:taggedCommandButton id="unbind" value="#{lblPrd.unbind}"
						ajaxOnly="true" reRender="unbindAccs, bindAccs,bind,unbind"
						disabled="#{MbAppWizAccount.bindCardSize == 0}"
						action="#{MbAppWizAccount.doUnbind}" style="margin-left:5px; margin-top:5px;"/>
						
					<bre:taggedCommandButton id="bind" value="#{lblPrd.bind}"
						ajaxOnly="true" reRender="unbindAccs, bindAccs,unbind,bind"
						disabled="#{MbAppWizAccount.unbindCardSize == 0}"
						action="#{MbAppWizAccount.doBind}" style="margin-left:5px; margin-top:5px;"/>	
			</h:panelGrid>
			<br/>

			
		
			<h:panelGrid styleClass="filter-table field-cont twoColumnTable" id="account"
				columns="2" columnClasses="firstCol200px,column200px" >

				<h:outputLabel
					value="#{lblAcc.account_number}:"
					title="#{lblAcc.account_number}"/>
				<h:inputText id="accountNumber"
					value="#{MbAppWizAccount.activeCard.mask}" label="#{MbAppWizAccount.activeCard.mask}"
					rendered="#{MbAppWizAccount.activeCard != null}" disabled="true"/>
				<h:inputText id="accountNumberNull" value="" rendered="#{MbAppWizAccount.activeCard == null}"
					disabled="true"/>	
				
				<ui:remove><h:outputLabel
					value="#{lblAcc.account_type}:"
					title="#{lblAcc.account_type}"/>
				<h:inputText id="accountType"
					value="#{DictUtils.articles[MbAppWizAccount.activeCard.cardType]}" 
						label="#{DictUtils.articles[MbAppWizAccount.activeCard.cardType]}"
					rendered="#{MbAppWizAccount.activeCard != null}" disabled="true"/>
				<h:inputText id="accountTypeNull" value="" rendered="#{MbAppWizAccount.activeCard == null}"
					disabled="true"/>
				</ui:remove>
			</h:panelGrid>
			</h:form>	
		</fieldset>
	</ui:composition>
</html>
