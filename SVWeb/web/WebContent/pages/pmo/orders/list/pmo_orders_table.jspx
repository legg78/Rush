<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:bm="http://www.bpc.ru/jsf/misc"
	  xmlns:fmt="http://www.bpc.ru/el/formatter">
<ui:composition>

	<h:form id="pmoOrdersTableForm">
		<h:panelGroup styleClass="search_result_block" layout="block">
			<h:panelGroup styleClass="search_result_block_left fix-ff" layout="block">
				<h:panelGroup id="pmoOrdersTableWrapper" layout="block"
				              styleClass="search_result_block_inner">
					<rich:extendedDataTable id="pmoOrdersTable"
					                        tableState="#{MbPmoPaymentOrdersSearch.tableState}"
					                        styleClass="res-table"
					                        headerClass="res-table-header"
					                        rowClasses=",odd"
					                        selectedClass="res-table-selected"
					                        var="item"
					                        value="#{MbPmoPaymentOrdersSearch.dataModel}"
					                        selection="#{MbPmoPaymentOrdersSearch.itemSelection}"
					                        rows="#{MbPmoPaymentOrdersSearch.rowsNum}"
											width="100%"
					                        height="255px"
					                        selectionMode="single"
					                        noDataLabel="#{MbPmoPaymentOrdersSearch.searching ? lblCommon['no_records_found'] : lblCommon['enter_search_criteria_above']}">

						<a4j:support event="onselectionchange" eventsQueue="queue"
						             reRender="pmoOrdersTableButtons, #{MbPmoPaymentOrdersSearch.tabName}" ajaxSingle="true" limitToList="true"/>

						<rich:column id="id" label="#{lblRec.order_id}" sortBy="#{'id'}" width="12%">
							<f:facet name="header">
								<a4j:outputPanel layout="none">
									<script>updateHeight();</script>
									<h:outputText value="#{lblRec.order_id}" title="#{lblRec.order_id}"/>
								</a4j:outputPanel>
							</f:facet>
							<h:outputText value="#{item.id}"/>
						</rich:column>

						<rich:column id="orderDate" label="#{lblRec.order_date}" width="10%" sortBy="#{'orderDate'}">
							<f:facet name="header">
								<h:outputText value="#{lblRec.order_date}" title="#{lblRec.order_date}" />
							</f:facet>
							<h:outputLabel value="#{item.eventDate}"
										   title="#{item.eventDate}">
								<f:convertDateTime pattern="#{usession.fullDatePattern}"
												   timeZone="#{CommonUtils.timeZone}" />
							</h:outputLabel>
						</rich:column>

						<rich:column id="entityType" label="#{lblCommon.entity_type}" width="10%" sortBy="#{'entityType'}">
							<f:facet name="header">
								<h:outputText value="#{lblCommon.entity_type}" title="#{lblCommon.entity_type}"/>
							</f:facet>
							<h:outputLabel value="#{DictUtils.articles[item.entityType]}"
										   title="#{DictUtils.articles[item.entityType]}"/>
						</rich:column>

						<rich:column id="objectNumber" label="#{lblCommon.object_number}" width="12%" sortBy="#{'objectNumber'}">
							<f:facet name="header">
								<h:outputText value="#{lblCommon.object_number}" title="#{lblCommon.object_number}"/>
							</f:facet>
							<h:outputLabel value="#{item.objectNumber}" title="#{item.objectNumber}"/>
						</rich:column>

						<rich:column id="purpose" label="#{lblPmo.purpose}" width="15%" sortBy="#{'purposeLabel'}">
							<f:facet name="header">
								<h:outputText value="#{lblPmo.purpose}" title="#{lblPmo.purpose}"/>
							</f:facet>
							<h:outputLabel value="#{item.purposeName}" title="#{item.purposeName}"/>
						</rich:column>

						<rich:column id="amount" label="#{lblRec.order_amount}" width="12%"
									 style="text-align: right" sortBy="#{'orderAmount'}">
							<f:facet name="header">
								<h:panelGroup style="overflow-x:hidden">
									<h:outputText value="#{lblRec.order_amount}"
												  title="#{lblRec.order_amount}"/>
								</h:panelGroup>
							</f:facet>
							<div class="#{EntityIcons.objectsMapS['ENTT0046'][item.currency]}"
								 style="float:right; margin: 0 0 0 10px;"/>
							<h:outputText value="#{fmt:formatMoney(item.amount, CurrencyUtils.currencyObjectsMap[item.currency].exponent)} #{CurrencyUtils.currencyShortNamesMap[item.currency]}"
										  title="#{fmt:formatMoney(item.amount, CurrencyUtils.currencyObjectsMap[item.currency].exponent)} #{CurrencyUtils.currencyMap[item.currency]}"
										  rendered="#{item.amount != null}"/>
						</rich:column>

						<rich:column id="status" label="#{lblCommon.status}" width="13%" sortBy="#{'status'}">
							<f:facet name="header">
								<h:outputText value="#{lblCommon.status}" title="#{lblCommon.status}"/>
							</f:facet>
							<h:outputLabel value="#{DictUtils.articles[item.status]}"
										   title="#{DictUtils.articles[item.status]}"/>
						</rich:column>

						<rich:column id="paymentOrderNum" label="#{lblRec.payment_order_number}" width="15%" sortBy="#{'paymentOrderNum'}">
							<f:facet name="header">
								<h:outputText value="#{lblRec.payment_order_number}" title="#{lblRec.payment_order_number}"/>
							</f:facet>
							<h:outputLabel value="#{item.orderNumber}" title="#{item.orderNumber}"/>
						</rich:column>


					</rich:extendedDataTable>
				</h:panelGroup>
				<a4j:outputPanel ajaxRendered="true">
					<h:panelGroup id="show_more_panel" styleClass="show-more-vert show-more-result-tab" layout="block"/>
					<h:graphicImage url="/_img/hd_searchblock.gif" styleClass="hd-searchblock"/>
					<h:panelGroup styleClass="collapse-vert table-collapse-vert" layout="block"/>
				</a4j:outputPanel>
			</h:panelGroup>
		</h:panelGroup>
	</h:form>
</ui:composition>
</html>
