<?xml version="1.0" encoding="UTF-8" ?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext"
                xmlns:rich="http://richfaces.org/rich">

<h:form id="mcwFileRejectsForm">
<h:panelGroup id="mcwFileRejectsTableWrapper" layout="block"
              style="padding:0px;margin:0px;">
    <rich:extendedDataTable enableContextMenu="true" id="mcwFileRejectsTable"
                            rowClasses=",odd"
                            rows="#{detailsBean.rowsNum}"
                            var="item"
                            headerClass="res-table-header table-header-ext"
                            styleClass="res-table"
                            tableState="#{detailsBean.tableState}"
                            value="#{detailsBean.rejects}"
                            selection="#{detailsBean.itemSelection}"
                            noDataLabel="#{lblCommon['no_records_found']}">

        <a4j:support event="onselectionchange" reRender="mcwFileRejectsForm:btnPanelMcwFileReject" />


        <rich:column title="#{'Network Id'}" label="#{'Network Id'}" sortBy="#{'networkId'}" id="NetworkId" width="10%" visible="false">
            <f:facet name="header">
                <a4j:outputPanel layout="none">
                    <script>updateHeight();</script>
                    <h:outputText value="#{'network_id'}" title="#{'network_id'}" />
                </a4j:outputPanel>
            </f:facet>
            <h:outputText value="#{item.networkId}"
                          title="#{item.networkId}"/>
        </rich:column>

        <rich:column title="Inst Id" label="#{'instId'}" sortBy="#{'instId'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'inst_id'}" title="#{'inst_id'}" />
            </f:facet>
            <h:outputText value="#{item.instId}"
                          title="#{item.instId}"/>
        </rich:column>

        <rich:column title="File Id" label="#{'fileId'}" sortBy="#{'fileId'}" width="5%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'file_id'}" title="#{'file_id'}" />
            </f:facet>
            <h:outputText value="#{item.fileId}"
                          title="#{item.fileId}"/>
        </rich:column>

        <rich:column title="Rejected Fin Id" label="#{'rejectedFinId'}" sortBy="#{'rejectedFinId'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'rejected_fin_id'}" title="#{'rejected_fin_id'}" />
            </f:facet>
            <h:outputText value="#{item.rejectedFinId}"
                          title="#{item.rejectedFinId}"/>
        </rich:column>

        <rich:column title="Rejected File Id" label="#{'rejectedFileId'}" sortBy="#{'rejectedFileId'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'rejected_file_id'}" title="#{'rejected_file_id'}" />
            </f:facet>
            <h:outputText value="#{item.rejectedFileId}"
                          title="#{item.rejectedFileId}"/>
        </rich:column>

        <rich:column title="Mti" label="#{'mti'}" sortBy="#{'mti'}" width="10%">
            <f:facet name="header">
                <h:outputText value="#{'mti'}" title="#{'mti'}" />
            </f:facet>
            <h:outputText value="#{item.mti}" title="#{item.mti}"/>
        </rich:column>

        <rich:column title="De024" label="#{'de024'}" sortBy="#{'de024'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'de024'}" title="#{'de024'}" />
            </f:facet>
            <h:outputText value="#{item.de024}"
                          title="#{item.de024}"/>
        </rich:column>

        <rich:column title="De071" label="#{'de071'}" sortBy="#{'de071'}" width="10%" visible="true">
            <f:facet name="header">
                <h:outputText value="#{'de071'}" title="#{'de071'}" />
            </f:facet>
            <h:outputText value="#{item.de071}"
                          title="#{item.de071}"/>
        </rich:column>

        <rich:column title="De072" label="#{'de072'}" sortBy="#{'de072'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'de072'}" title="#{'de072'}" />
            </f:facet>
            <h:outputText value="#{item.de072}"
                          title="#{item.de072}"/>
        </rich:column>

        <rich:column title="De093" label="#{'de093'}" sortBy="#{'de093'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'de093'}" title="#{'de093'}" />
            </f:facet>
            <h:outputText value="#{item.de093}"
                          title="#{item.de093}"/>
        </rich:column>

        <rich:column title="De094" label="#{'de094'}" sortBy="#{'de094'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'de094'}" title="#{'de094'}" />
            </f:facet>
            <h:outputText value="#{item.de094}"
                          title="#{item.de094}"/>
        </rich:column>

        <rich:column title="De100" label="#{'de100'}" sortBy="#{'de100'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'de100'}" title="#{'de100'}" />
            </f:facet>
            <h:outputText value="#{item.de100}"
                          title="#{item.de100}"/>
        </rich:column>

        <rich:column title="P0005" label="#{'p0005'}" sortBy="#{'p0005'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'p0005'}" title="#{'p0005'}" />
            </f:facet>
            <h:outputText value="#{item.p0005}"
                          title="#{item.p0005}"/>
        </rich:column>

        <rich:column title="P0006" label="#{'p0006'}" sortBy="#{'p0006'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'p0006'}" title="#{'p0006'}" />
            </f:facet>
            <h:outputText value="#{item.p0006}"
                          title="#{item.p0006}"/>
        </rich:column>

        <rich:column title="P0025" label="#{'p0025'}" sortBy="#{'p0025'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'p0025'}" title="#{'p0025'}" />
            </f:facet>
            <h:outputText value="#{item.p0025}"
                          title="#{item.p0025}"/>
        </rich:column>

        <rich:column title="P0026" label="#{'p0026'}" sortBy="#{'p0026'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'p0026'}" title="#{'p0026'}" />
            </f:facet>
            <h:outputText value="#{item.p0026}"
                          title="#{item.p0026}"/>
        </rich:column>

        <rich:column title="P0138" label="#{'p0138'}" sortBy="#{'p0138'}" width="10%" visible="true">
            <f:facet name="header">
                <h:outputText value="#{'p0138'}" title="#{'p0138'}" />
            </f:facet>
            <h:outputText value="#{item.p0138}"
                          title="#{item.p0138}"/>
        </rich:column>

        <rich:column title="P0165" label="#{'p0165'}" sortBy="#{'p0165'}" width="10%" visible="false">
            <f:facet name="header">
                <h:outputText value="#{'p0165'}" title="#{'p0165'}" />
            </f:facet>
            <h:outputText value="#{item.p0165}"
                          title="#{item.p0165}"/>
        </rich:column>

        <rich:column title="P0280" label="#{'p0280'}" sortBy="#{'p0280'}" width="10%" visible="true">
            <f:facet name="header">
                <h:outputText value="#{'p0280'}" title="#{'p0280'}" />
            </f:facet>
            <h:outputText value="#{item.p0280}"
                          title="#{item.p0280}"/>
        </rich:column>


        <rich:column label="#{'Session Id'}" title="Session Id" id="sessionid" sortBy="#{'session_id'}"
                     width="10%" visible="false">
            <f:facet name="header">
                <a4j:outputPanel layout="none">
                    <h:outputText value="Session ID" title="Session ID"/>
                </a4j:outputPanel>
            </f:facet>
            <h:outputText value="#{item.sessionId}" title="#{item.sessionId}"/>
        </rich:column>

        <rich:column label="File name" title="File name" id="fileName" sortBy="#{'file_name'}"
                     width="10%">
            <f:facet name="header">

                <h:outputText value="File name" title="File name"/>

            </f:facet>
            <h:outputText value="#{item.fileName}" title="#{item.fileName}"/>
        </rich:column>






    </rich:extendedDataTable>
</h:panelGroup>



<h:panelGroup layout="block"
              styleClass="nocorner_search_result_block">
    <h:panelGroup layout="block" styleClass="table_tools">
        <h:panelGrid id="btnMcwFileRejects" styleClass="fw buttons_block" columns="5" columnClasses=", table_tools_state">
            <h:outputLabel for="rows_num" value="#{lblCommon.rows_per_page}" title="#{lblCommon.rows_per_page}" />
            <h:selectOneMenu id="rows_num"
                             value="#{detailsBean.rowsNum}" style="width:40px">
                <a4j:support event="onchange"
                             reRender="mcwFileRejectsTable, dsopers, pagesNum, btnPanel, togglePanel" />
                <f:selectItems value="#{CommonUtils.rowNumsList}"/>
            </h:selectOneMenu>

            <rich:datascroller maxPages="10" fastControls="hide"
                               pagesVar="pages" styleClass="res-datascroller" id="dsopers"
                               for="mcwFileRejectsTable" reRender="btnPanel, togglePanel">
                <f:facet name="first">
                    <h:outputText value="&lt;&lt;" styleClass="prev-next" />
                </f:facet>
                <f:facet name="first_disabled">
                    <h:outputText value="&lt;&lt;" styleClass="prev-next-dis" />
                </f:facet>
                <f:facet name="last">
                    <h:outputText value="&gt;&gt;" styleClass="prev-next" />
                </f:facet>
                <f:facet name="last_disabled">
                    <h:outputText value="&gt;&gt;" styleClass="prev-next-dis" />
                </f:facet>
                <f:facet name="previous">
                    <h:outputText value="#{lblCommon.prev}" styleClass="prev-next" />
                </f:facet>
                <f:facet name="previous_disabled">
                    <h:outputText value="#{lblCommon.prev}"
                                  styleClass="prev-next-dis" />
                </f:facet>
                <f:facet name="next">
                    <h:outputText value="#{lblCommon.next}" styleClass="prev-next" />
                </f:facet>
                <f:facet name="next_disabled">
                    <h:outputText value="#{lblCommon.next}"
                                  styleClass="prev-next-dis" />
                </f:facet>
                <f:facet name="pages">
                </f:facet>
            </rich:datascroller>

            <h:panelGroup id="pagesNum">
                <h:outputText styleClass="strongClass" value="#{pages} " />
                <h:outputText value=" #{lblCommon.pages}" />
                <h:outputText value="" style="padding-left: 20px; padding-right: 20px;" />
                <h:outputText styleClass="strongClass" value="#{detailsBean.rejects.rowCount}"/>
                <h:outputText value=" #{lblCommon.records}"/>
                <h:outputText value="" style="padding-left: 20px; padding-right: 20px;" />
            </h:panelGroup>
            <h:panelGroup>
                <h:graphicImage url="/images/green-tick.png" title="#{lblCommon.save_table_state}" styleClass="action_icon"
                                onclick="saveMcwFileRejectTableState();"/>
                <h:graphicImage url="/images/red-cross.png" title="#{lblCommon.delete_table_state}" styleClass="action_icon"
                                onclick="deleteMcwFileRejectTableState();"/>
                <a4j:queue name="tablestatequeue"/>
                <a4j:jsFunction name="saveMcwFileRejectTableState" action="#{detailsBean.saveTableStateDB}" eventsQueue="tablestatequeue"/>
                <a4j:jsFunction name="deleteMcwFileRejectTableState" action="#{detailsBean.deleteTableStateDB}" eventsQueue="tablestatequeue"/>
            </h:panelGroup>
        </h:panelGrid>
    </h:panelGroup>
    <h:panelGrid id="btnPanelMcwFileReject" styleClass="fw buttons_block" columns="2" columnClasses=", table_tools_state">
        <bre:taggedCommandButton id="viewBtn"
                                 reRender="mcw_file_reject_modal_div" value="#{lblForm.view}"
                                 oncomplete="#{rich:component('mcw_file_reject_modal_panel')}.show()"
                                 action="#{detailsBean.view}"
                                 disabled="#{detailsBean.activeItem == null}"
                                 image="/images/create_doc.gif" />
    </h:panelGrid>
</h:panelGroup>
</h:form>


<rich:modalPanel id="mcw_file_reject_modal_panel" autosized="true" minWidth="500" minHeight="100">
<f:facet name="header">
    <h:outputText value="Rejects"/>
</f:facet>
<f:facet name="controls">
</f:facet>
<h:panelGroup id="mcw_file_reject_modal_div">
    <ui:include src="/pages/ps/mastercard/messages/rejectDetails.jspx">
        <ui:param name="detailsBean" value="#{detailsBean}" />
    </ui:include>
    <a4j:form>
        <h:panelGroup layout="block" styleClass="bottom_search_result_block_buttons">
            <h:panelGroup layout="block" styleClass="bottom_search_result_left_buttons">
                <h:panelGrid columns="2" columnClasses="width99P,paddingR12">
                    <h:outputText/>
                    <bre:taggedCommandButton limitToList="true" immediate="true"
                                             value="#{lblForm.close}" action="#{detailsBean.close}"
                                             oncomplete="#{rich:component('mcw_file_reject_modal_panel')}.hide()"
                                             reRender="mcw_file_reject_modal_div">
                        <f:actionListener type="ru.bpc.jsf.A4JFormReset" />
                    </bre:taggedCommandButton>
                </h:panelGrid>
            </h:panelGroup>
        </h:panelGroup>
    </a4j:form>
</h:panelGroup>

</rich:modalPanel>



<script>
updateHeight();
</script>
        </ui:composition>