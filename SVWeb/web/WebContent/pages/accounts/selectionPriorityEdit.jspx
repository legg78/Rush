<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:a4j="http://richfaces.org/a4j"
	  xmlns:rich="http://richfaces.org/rich"
	  xmlns:bm="http://www.bpc.ru/jsf/misc"
	  xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext">
<ui:composition>
	<script type="text/javascript">
//<!--
		function checkSelectionPriorityFields() {
			var checked = true;
			if (document.getElementById('selectionPriorityEditForm:newInst').value == "") {
				document.getElementById('selectionPriorityEditForm:newInstError').style.display = "inline";
				checked = false;
			}
			if (document.getElementById('selectionPriorityEditForm:newOperType').value == "") {
				document.getElementById('selectionPriorityEditForm:newOperTypeError').style.display = "inline";
				checked = false;
			}
			if (document.getElementById('selectionPriorityEditForm:newAccountType').value == "") {
				document.getElementById('selectionPriorityEditForm:newAccountTypeError').style.display = "inline";
				checked = false;
			}
			if (document.getElementById('selectionPriorityEditForm:newAccountStatus').value == "") {
				document.getElementById('selectionPriorityEditForm:newAccountStatusError').style.display = "inline";
				checked = false;
			}
			if (document.getElementById('selectionPriorityEditForm:newAccountCurrency').value == "") {
				document.getElementById('selectionPriorityEditForm:newAccountCurrencyError').style.display = "inline";
				checked = false;
			}
			if (document.getElementById('selectionPriorityEditForm:newPriority').value == "") {
				document.getElementById('selectionPriorityEditForm:newPriorityError').style.display = "inline";
				checked = false;
			}
			if (document.getElementById('selectionPriorityEditForm:partyType').value == "") {
				document.getElementById('selectionPriorityEditForm:partyTypeError').style.display = "inline";
				checked = false;
			}
			if (document.getElementById('selectionPriorityEditForm:msgType').value == "") {
				document.getElementById('selectionPriorityEditForm:msgTypeError').style.display = "inline";
				checked = false;
			}
			return checked;
		}
		//-->
	</script>

	<f:loadBundle var="lblAcc" basename="ru.bpc.sv2.ui.bundles.Acc"/>
	<f:loadBundle var="lblOpr" basename="ru.bpc.sv2.ui.bundles.Opr"/>
	<f:loadBundle var="lblAcq" basename="ru.bpc.sv2.ui.bundles.Acq"/>

	<rich:modalPanel id="selectionPriorityModalPanel" autosized="true" minWidth="300" minHeight="100">
      	<f:facet name="header">
			<h:panelGroup id="selectionPriorityModalHeader">
           	    <h:outputText value="#{lblAcc.edit_selection_priority}" rendered="#{MbSelectionPriorities.editMode}"/>
           	    <h:outputText value="#{lblAcc.new_selection_priority}" rendered="#{MbSelectionPriorities.newMode}"/>
			</h:panelGroup>
		</f:facet>
		<f:facet name="controls">
	    </f:facet>
    	<h:form id="selectionPriorityEditForm">
			<h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
				<h:panelGrid columns="2" styleClass="cardholderdata" columnClasses="firstColModal, width250">
					<h:outputLabel for="newInst" value="* #{lblCommon.institution}: " title="#{lblCommon.institution}"/>
					<h:panelGrid columns="1" cellspacing="0" cellpadding="0">
            			<h:selectOneMenu id="newInst" 
            					value="#{MbSelectionPriorities.newSelectionPriority.instId}" 
            					label="#{lblCommon.institution}"
            					onblur="hideErrorField(this)">
            				<f:selectItem itemValue=""/>
							<f:selectItem itemValue="%" itemLabel="#{lblCommon.any}"/>
							<f:selectItems value="#{MbSelectionPriorities.institutions}"/>
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
							id="newInstError" style="display:none;">
							<f:param name="fieldName" value="#{lblCommon.institution}"/>
						</h:outputFormat>
           			</h:panelGrid>
           			
           			<h:outputLabel for="newOperType" value="* #{lblOpr.operation_type}: " title="#{lblOpr.operation_type}"/>
           			<h:panelGrid columns="1" cellspacing="0" cellpadding="0">
            			<h:selectOneMenu id="newOperType" 
            					value="#{MbSelectionPriorities.newSelectionPriority.operType}"
            					label="#{lblOpr.operation_type}"
            					onblur="hideErrorField(this)">
            				<f:selectItem itemValue=""/>
							<f:selectItem itemValue="%" itemLabel="#{lblCommon.any}"/>
							<f:selectItems value="#{MbSelectionPriorities.operTypes}"/>
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
							id="newOperTypeError" style="display:none;">
							<f:param name="fieldName" value="#{lblOpr.operation_type}"/>
						</h:outputFormat>
           			</h:panelGrid>

           			<h:outputLabel for="newAccountType" value="* #{lblAcc.account_type}: " title="#{lblAcc.account_type}"/>
           			<h:panelGrid columns="1" cellspacing="0" cellpadding="0">
            			<h:selectOneMenu id="newAccountType" 
            					value="#{MbSelectionPriorities.newSelectionPriority.accountType}"
            					label="#{lblAcc.account_type}"
            					onblur="hideErrorField(this)">
            				<f:selectItem itemValue=""/>
							<f:selectItem itemValue="%" itemLabel="#{lblCommon.any}"/>
							<f:selectItems value="#{MbSelectionPriorities.accountTypes}"/>
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
							id="newAccountTypeError" style="display:none;">
							<f:param name="fieldName" value="#{lblAcc.account_type}"/>
						</h:outputFormat>
           			</h:panelGrid>

           			<h:outputLabel for="newAccountStatus" value="* #{lblAcc.account_status}: " title="#{lblAcc.account_status}"/>
           			<h:panelGrid columns="1" cellspacing="0" cellpadding="0">
            			<h:selectOneMenu id="newAccountStatus" 
            					value="#{MbSelectionPriorities.newSelectionPriority.accountStatus}"
            					label="#{lblAcc.account_status}"
            					onblur="hideErrorField(this)">
            				<f:selectItem itemValue=""/>
							<f:selectItem itemValue="%" itemLabel="#{lblCommon.any}"/>
							<f:selectItems value="#{MbSelectionPriorities.accountStatuses}"/>
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
							id="newAccountStatusError" style="display:none;">
							<f:param name="fieldName" value="#{lblAcc.account_status}"/>
						</h:outputFormat>
           			</h:panelGrid>

					<h:outputLabel for="newAccountCurrency" value="* #{lblAcq.account_currency}: " title="#{lblAcq.account_currency}"/>
					<h:panelGrid columns="1" cellspacing="0" cellpadding="0">
						<h:selectOneMenu id="newAccountCurrency"
										 value="#{MbSelectionPriorities.newSelectionPriority.accountCurrency}"
										 label="#{lblAcq.account_currency}"
										 onblur="hideErrorField(this)">
							<f:selectItem itemValue=""/>
							<f:selectItem itemValue="%" itemLabel="#{lblCommon.any}"/>
							<f:selectItems value="#{MbSelectionPriorities.accountCurrencies}"/>
						</h:selectOneMenu>
						<h:outputFormat id="newAccountCurrencyError"
										value="#{lblMsg.value_request}"
										styleClass="errorMarker"
										style="display:none;">
							<f:param name="fieldName" value="#{lblAcq.account_currency}"/>
						</h:outputFormat>
					</h:panelGrid>

           			<h:outputLabel for="newPriority" value="* #{lblCommon.priority}: " title="#{lblCommon.priority}"/>
					<h:panelGrid columns="1" cellspacing="0" cellpadding="0">
            			<h:inputText id="newPriority" 
            					value="#{MbSelectionPriorities.newSelectionPriority.priority}"
            					label="#{lblCommon.priority}" maxlength="4"
            					onkeypress="if (!numbersOnly(this, event)) return false;"
            					onblur="hideErrorField(this)">
            			</h:inputText>		
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
							id="newPriorityError" style="display:none;">
							<f:param name="fieldName" value="#{lblCommon.priority}"/>
						</h:outputFormat>
           			</h:panelGrid>

           			<h:outputLabel for="partyType" value="* #{lblOpr.party_type}: " title="#{lblOpr.party_type}"/>
					<h:panelGrid columns="1" cellspacing="0" cellpadding="0">
            			<h:selectOneMenu id="partyType" 
            					value="#{MbSelectionPriorities.newSelectionPriority.partyType}"
            					label="#{lblOpr.party_type}"
            					onblur="hideErrorField(this)">
            				<f:selectItem itemValue=""/>
							<f:selectItem itemValue="%" itemLabel="#{lblCommon.any}"/>
							<f:selectItems value="#{MbSelectionPriorities.partyTypes}"/>
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
							id="partyTypeError" style="display:none;">
							<f:param name="fieldName" value="#{lblOpr.party_type}"/>
						</h:outputFormat>
           			</h:panelGrid>
           			
           			<h:outputLabel for="msgType" value="* #{lblOpr.msg_type}: " title="#{lblOpr.msg_type}"/>
           			<h:panelGrid columns="1" cellspacing="0" cellpadding="0">
            			<h:selectOneMenu id="msgType" 
            					value="#{MbSelectionPriorities.newSelectionPriority.msgType}"
            					label="#{lblOpr.msg_type}"
            					onblur="hideErrorField(this)">
            				<f:selectItem itemValue=""/>
							<f:selectItem itemValue="%" itemLabel="#{lblCommon.any}"/>
							<f:selectItems value="#{MbSelectionPriorities.msgTypes}"/>
						</h:selectOneMenu>
						<h:outputFormat value="#{lblMsg.value_request}" styleClass="errorMarker"
							id="msgTypeError" style="display:none;">
							<f:param name="fieldName" value="#{lblOpr.msg_type}"/>
						</h:outputFormat>
           			</h:panelGrid>

					<h:outputLabel for="modifier" value="#{lblCommon.modifier}: " title="#{lblCommon.modifier}"/>
					<h:panelGrid columns="1" cellspacing="0" cellpadding="0">
						<h:selectOneMenu id="modifier"
										 value="#{MbSelectionPriorities.newSelectionPriority.modifierId}"
										 label="#{lblCommon.modifier}">
							<f:selectItem itemValue=""/>
							<f:selectItems value="#{MbSelectionPriorities.modifiers}"/>
						</h:selectOneMenu>
					</h:panelGrid>
				</h:panelGrid>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="bottom_search_result_block_buttons">
				<h:panelGroup layout="block" styleClass="bottom_search_result_left_buttons">
					<h:panelGrid columns="3" columnClasses="width99P,,paddingR12">
						<h:outputText/>

						<bre:taggedCommandButton value="#{lblForm.save}"
												 type="submit"
												 action="#{MbSelectionPriorities.save}"
												 onclick="if (!checkSelectionPriorityFields()) return false;
												          disableModalPanelBtns(this)"
												 oncomplete="enableModalPanelBtns(this);
												             if (#{usession.noErrorResponse})
												             #{rich:component('selectionPriorityModalPanel')}.hide()"
												 reRender="#{rerenderList}"/>

                       	<bre:taggedCommandButton value="#{lblForm.cancel}"
												 action="#{MbSelectionPriorities.cancel}"
												 immediate="true"
												 reRender="selectionPriorityEditForm"
												 oncomplete="#{rich:component('selectionPriorityModalPanel')}.hide()">
							<f:actionListener type="ru.bpc.jsf.A4JFormReset" />
						</bre:taggedCommandButton>
					</h:panelGrid>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</rich:modalPanel>

</ui:composition>
</html>
