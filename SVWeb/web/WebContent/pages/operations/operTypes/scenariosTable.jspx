<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext">
<ui:composition>
	<h:form>
		<rich:extendedDataTable id="selectionsTable" rowClasses=",odd"
			var="item" value="#{MbScenarioSelections.selections}"
			selection="#{MbScenarioSelections.itemSelection}"
			selectionMode="single" enableContextMenu="false" rows="0"
			noDataLabel="#{MbScenarioSelections.searching?lblCommon['no_records_found'] : lblCommon['enter_search_criteria_above']}"
			height="255px">

			<a4j:support event="onselectionchange" reRender="workplacePanel, btnPanel" eventsQueue="queue"/>

			<rich:column title="Name" sortBy="#{'name'}" width="12%">
				<f:facet name="header">
					<a4j:outputPanel layout="none">
						<script>
							updateHeight();
						</script>
						<h:outputText value="#{lblCommon.name}" title="#{lblCommon.name}" />
					</a4j:outputPanel>
				</f:facet>
				<h:outputText value="#{item.name}" />
			</rich:column>

			<rich:column title="description" sortBy="#{'description'}"
				width="12%">
				<f:facet name="header">
					<h:outputText value="#{lblCommon.description}"
						title="#{lblCommon.description}" />
				</f:facet>
				<h:outputText value="#{item.description}" />
			</rich:column>

			<rich:column title="Mod Name" sortBy="#{'modName'}" width="12%">
				<f:facet name="header">
					<h:outputText value="#{lblCommon.modifier}"
						title="#{lblCommon.modifier}" />
				</f:facet>
				<h:outputText value="#{item.modName}" />
			</rich:column>

			<rich:column title="Oper type" sortBy="#{'operType'}" width="12%">
				<f:facet name="header">
					<h:outputText value="#{lblAut.oper_type}"
						title="#{lblAut.oper_type}" />
				</f:facet>
				<h:outputText
					title="#{item.operType } - #{DictUtils.allArticlesDesc[item.operType]}"
					value="#{item.operType } - #{DictUtils.allArticlesDesc[item.operType]}" />
				<h:outputText value="" rendered="#{item.operType == null}" />
			</rich:column>

			<rich:column title="Reversal" sortBy="#{'reversal'}" width="12%"
				style="text-align:center;">
				<f:facet name="header">
					<h:outputText value="#{lblAut.is_reversal}"
						title="#{lblAut.is_reversal}" />
				</f:facet>
				<h:selectBooleanCheckbox value="#{item.reversal}"
					onclick="return false;"></h:selectBooleanCheckbox>
			</rich:column>

			<rich:column title="Sttl type" sortBy="#{'sttlType'}" width="12%">
				<f:facet name="header">
					<h:outputText value="#{lblOpr.sttl_type}"
						title="#{lblOpr.sttl_type}" />
				</f:facet>
				<h:outputText
					title="#{item.sttlType } - #{DictUtils.allArticlesDesc[item.sttlType]}"
					value="#{item.sttlType } - #{DictUtils.allArticlesDesc[item.sttlType]}"
					rendered="#{item.sttlType != null}" />
				<h:outputText value="" rendered="#{item.sttlType == null}" />
			</rich:column>

			<rich:column title="Priority" sortBy="#{'priority'}" width="12%">
				<f:facet name="header">
					<h:outputText value="#{lblCommon.priority}"
						title="#{lblCommon.priority}" />
				</f:facet>
				<h:outputText value="#{item.priority}" />
			</rich:column>

			<rich:column title="Msg type" sortBy="#{'msgType'}" width="12%">
				<f:facet name="header">
					<h:outputText value="#{lblAut.msg_type}" title="#{lblAut.msg_type}" />
				</f:facet>
				<h:outputText
					title="#{item.msgType } - #{DictUtils.allArticlesDesc[item.msgType]}"
					value="#{item.msgType } - #{DictUtils.allArticlesDesc[item.msgType]}"
					rendered="#{item.msgType != null}" />
				<h:outputText value="" rendered="#{item.msgType == null}" />
			</rich:column>

		</rich:extendedDataTable>
		
		<h:panelGroup layout="block" styleClass="bottom_search_result_block"
			style="height:30px; overflow:hidden;">
			<h:panelGroup layout="block" styleClass="bottom_search_result_left">

				<h:panelGrid id="btnPanel" columns="2" styleClass="buttons_block">
	            	<bre:taggedCommandButton id="addBtn"
                   		reRender="selection_modal_header, selection_modal_div"
                   		value="#{lblForm.add}" oncomplete="#{rich:component('selection_modal_panel')}.show()"
                   		action="#{MbOperTypes.addScenarioSelection}"
                   		disabled="#{MbOperTypes.activeOperType == null}"
                   		image="/images/create_doc.gif"
                   		/>
					<bre:taggedCommandButton id="deleteBtn"
						value="#{lblForm.delete}"
						oncomplete="#{rich:component('deleteScenarioViewId:confirmPanel')}.show()"
						disabled="#{MbScenarioSelections.activeSelection == null}"
						image="/images/delete.gif" />
				</h:panelGrid>
			</h:panelGroup>
		</h:panelGroup>		
	</h:form>
	
	<ui:include src="/pages/scenario/scenario_selection_edit.jspx">
		<ui:param name="rerenderList" value="#{MbOperTypes.entityTab}, scenariosDetailsTab" />
		<ui:param name="lockOperType" value="true" />
		<ui:param name="scenarios" value="#{MbOperTypes.scenarios}" />
	</ui:include>
	
	<ui:include src="/pages/utils/confirmPanel.jspx">
		<ui:param name="backingBean" value="#{MbScenarioSelections}"/>
		<ui:param name="yesAction" value="delete"/>
		<ui:param name="warningMsg" value="#{lblMsg.confirm_delete}"/> 
		<ui:param name="rerenderList" value="#{MbOperTypes.entityTab}, scenariosDetailsTab"/>
		<ui:param name="confirmQuestion" value=" "/> 
		<ui:param name="subviewId" value="deleteScenarioViewId"/>
		<ui:param name="yes" value="#{lblForm.ok}"/>
		<ui:param name="no" value="#{lblForm.cancel}"/>
	</ui:include>

</ui:composition>
</html>