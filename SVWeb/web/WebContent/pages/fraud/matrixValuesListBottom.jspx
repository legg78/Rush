<?xml version="1.0" encoding="UTF-8"?>
<html	xmlns="http://www.w3.org/1999/xhtml"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:a4j="http://richfaces.org/a4j"
		xmlns:rich="http://richfaces.org/rich"
		xmlns:bm="http://www.bpc.ru/jsf/misc"
		xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext">
<ui:composition>
	<f:loadBundle var="lblFrp" basename="ru.bpc.sv2.ui.bundles.Frp"/>
	
   	<h:form id="matrixValuesBtmForm">

	    <rich:extendedDataTable
				id="matrixValuesTable"
				styleClass="res-table"
				headerClass="res-table-header"
				rowClasses=",odd"
				selectedClass="res-table-selected"
				var="item"
				value="#{MbMatrixValues.matrixValues}"
				selection="#{MbMatrixValues.itemSelection}"
				height="220px"
				rows="0"
				enableContextMenu="false"
				noDataLabel="#{lblCommon['no_records_found']}">

			<a4j:support event="onselectionchange" reRender="matrixValuesBtmForm:btnPanel"/>

			<rich:column sortBy="#{'xValue'}" width="30%">
				<f:facet name="header">
                   	<h:outputText value="#{lblFrp.x_value}" title="#{lblFrp.x_value}"/>
				</f:facet>
               	<h:outputText value="#{item.xValue}" title="#{item.xValue}"/>
			</rich:column>

			<rich:column sortBy="#{'yValue'}" width="30%">
				<f:facet name="header">
                   	<h:outputText value="#{lblFrp.y_value}" title="#{lblFrp.y_value}"/>
				</f:facet>
               	<h:outputText value="#{item.yValue}" title="#{item.yValue}"/>
			</rich:column>

			<rich:column sortBy="#{'matrixValue'}" width="40%">
				<f:facet name="header">
                   	<h:outputText value="#{lblFrp.matrix_value}" title="#{lblFrp.matrix_value}"/>
				</f:facet>
               	<h:outputText value="#{item.matrixValue}" title="#{item.matrixValue}"/>
			</rich:column>
	    </rich:extendedDataTable>

		<h:panelGroup layout="block" styleClass="bottom_search_result_block_buttons">
			<h:panelGroup layout="block" styleClass="bottom_search_result_left_buttons">

	            <h:panelGrid id="btnPanel" columns="4" style="vertical-align: top;" cellpadding="0" cellspacing="0">
	            	<bre:taggedCommandButton id="addBtn"
                      		reRender="matrixValueModalHeader, matrixValueModalDiv"
                      		value="#{lblForm.add}"
                   			oncomplete="#{rich:component('matrixValueModalPanel')}.show()"
                      		action="#{MbMatrixValues.add}"
                      		disabled="#{MbMatrixValues.filter.matrixId == null}"
                      		image="/images/create_doc.gif"
                      		/>
	            	<bre:taggedCommandButton id="editBtn"
                      		reRender="matrixValueModalHeader, matrixValueModalDiv"
                      		value="#{lblForm.edit}"
                   			oncomplete="#{rich:component('matrixValueModalPanel')}.show()"
                      		action="#{MbMatrixValues.edit}"
                      		disabled="#{MbMatrixValues.activeMatrixValue == null}"
                      		image="/images/edit.gif"
                      		/>
					<bre:taggedCommandButton id="deleteBtn"
                      		reRender="matrixValuesBtmForm"
                      		value="#{lblForm.delete}"
                      		action="#{MbMatrixValues.delete}"
                      		onclick="if (!confirm('#{lblMsg.confirm_delete}')) return false;"
                      		disabled="#{MbMatrixValues.activeMatrixValue == null}"
                      		image="/images/delete.gif"
                      		/>
				</h:panelGrid>
			</h:panelGroup>
	    </h:panelGroup>
    </h:form>

	<rich:modalPanel id="matrixValueModalPanel" autosized="true" minWidth="300" minHeight="50">
 	    <f:facet name="header">
 	    	<h:panelGroup id="matrixValueModalHeader">
 	    		<h:outputText value="#{lblFrp.edit_matrix_value}" rendered="#{MbMatrixValues.editMode}"/>
 	    		<h:outputText value="#{lblFrp.add_matrix_value}" rendered="#{MbMatrixValues.newMode}"/>
 	    	</h:panelGroup>
        </f:facet>
  	    <f:facet name="controls">
      	</f:facet>
      	<h:form id="matrixValueModalDiv">
			<h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
				<h:panelGrid columns="2" styleClass="cardholderdata" columnClasses="firstColModal, width250">
					
					<h:outputLabel value="* #{lblFrp.x_value}" title="#{lblFrp.x_value}"/>
					<h:panelGrid cellpadding="0" cellspacing="0">
						<h:inputText id="newXValue"
								value="#{MbMatrixValues.newMatrixValue.xValue}"
								required="true" label="#{lblFrp.x_value}"
								maxlength="200"/>
						<rich:message for="newXValue" styleClass="errorMarker"/>
					</h:panelGrid>
					
					<h:outputLabel value="* #{lblFrp.y_value}" title="#{lblFrp.y_value}"/>
					<h:panelGrid cellpadding="0" cellspacing="0">
						<h:inputText id="newYValue"
								value="#{MbMatrixValues.newMatrixValue.yValue}"
								required="true" label="#{lblFrp.y_value}"
								maxlength="200"/>
						<rich:message for="newYValue" styleClass="errorMarker"/>
					</h:panelGrid>

					<h:outputLabel value="* #{lblFrp.matrix_value}" title="#{lblFrp.matrix_value}"/>
					<h:panelGrid cellpadding="0" cellspacing="0">
						<h:inputText id="newMatrixValue"
								value="#{MbMatrixValues.newMatrixValue.matrixValue}"
								required="true" label="#{lblFrp.matrix_value}"
								maxlength="200"/>
						<rich:message for="newMatrixValue" styleClass="errorMarker"/>
					</h:panelGrid>
				</h:panelGrid>
			</h:panelGroup>

      	    <h:panelGroup layout="block" styleClass="bottom_search_result_block_buttons">
				<h:panelGroup layout="block" styleClass="bottom_search_result_left_buttons">
	       	    	<h:panelGrid columns="3" columnClasses="width99P,,paddingR12">
	       	    		<h:outputText/>
                       	<bre:taggedCommandButton
                       			value="#{lblForm.save}" type="submit" action="#{MbMatrixValues.save}"
                       			oncomplete="if (#{usession.noErrorResponse}) #{rich:component('matrixValueModalPanel')}.hide()"
                       			reRender="matrixValuesBtmForm"
                        		/>
                       	<bre:taggedCommandButton
                        		value="#{lblForm.cancel}" 
                        		action="#{MbMatrixValues.cancel}" immediate="true"
                        		oncomplete="#{rich:component('matrixValueModalPanel')}.hide()"
                        		>
                        	<f:actionListener type="ru.bpc.jsf.A4JFormReset"/>
                        </bre:taggedCommandButton>
		    		</h:panelGrid>
		    	</h:panelGroup>
		    </h:panelGroup>
		</h:form>
	</rich:modalPanel>
</ui:composition>
</html>
