<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext">
<head>
<title>SmartVista - #{MbSystemInfo.instance} - #{usession.userName}</title>
	<!--[if lt IE 10]>
		<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8"/>
	<![endif]-->
	<meta http-equiv="X-XSS-Protection" content="1; mode=block"/>
	<meta http-equiv="Content-Security-Policy"
		  content="default-src 'self';
		           script-src 'self' 'unsafe-inline' 'unsafe-eval';
		           connect-src 'self';
		           img-src 'self';
		           style-src 'self' 'unsafe-inline';"/>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0, s-maxage=0"/>
	<meta http-equiv="Pragma" content="no-cache"/>
	<meta http-equiv="Expires" content="-1"/>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8"/>
	<meta http-equiv="X-content-type-options" content="nosniff"/>
	<meta http-equiv="referrer" content="no-referrer"/>
	<link rel="stylesheet" type="text/css" href="#{MbUIUtils.openfacesDefaulsCssUri}" />
	<script type="text/javascript" src="#{MbUIUtils.openfacesUtilJsUri}" />
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/main_styles.css" />

<script type="text/javascript" src="#{request.contextPath}/js/main.js" />
<script type="text/javascript" src="#{request.contextPath}/js/stretch.js" />
<script type="text/javascript" src="#{request.contextPath}/js/tabs.js" />
<script type="text/javascript" src="#{request.contextPath}/js/jsMask.js" />
<script type="text/javascript" src="#{request.contextPath}/js/codemirror.js"></script>
<script type="text/javascript" src="#{request.contextPath}/js/mode/xml/xml.js"></script>
<script type="text/javascript" src="#{request.contextPath}/js/msdropdown/jquery.dd.js"></script>
<script type="text/javascript" src="#{request.contextPath}/JavaScriptServlet"></script>
<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/patchIE.js"/>

<!--[if IE 6]>
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/button-ie.css" />
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/button-ie.css" />
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/search-result-ie.css" />
<![endif]-->
<link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/button.css" />

<style type="text/css">
.hidelink{
	padding-top:2px;
	padding-right:1px;
	cursor:pointer;
}

#pageContent-right {
				width: 176px;
				float: right;
			}
			#pageContent-left {
				margin-right: 250px;
			}
</style>
	<script type="text/javascript">// <!--
	var infoWindowAMShown = false;
	var infoWindowAMTimerStarted = false;
	var filterOffsetLeft;
	var filterOffsetTop;
	var debugToConsole = false;

	var infoWindowShowFired = 0;
	var infoWindowHideFired = 0;

	function showWait() {
		if (debugToConsole)console.log("ShowWait: Timer fired! timer = " + infoWindowAMTimer);
		infoWindowAMTimerStarted = false;
		if (!infoWindowAMShown) {
			if (infoWindowShowFired > infoWindowHideFired) {
				Richfaces.showModalPanel('wait');
				infoWindowAMShown = true;
			}
		}
	}

	function showModalInfoWindow() {
		infoWindowShowFired = new Date().getTime();
		if (debugToConsole)console.log("Show: begin");
		if (!infoWindowAMTimerStarted) {
			if (debugToConsole)console.log("Show: Timer not started. Setting timeout");
			setTimeout(showWait, 200);
			infoWindowAMTimerStarted = true;
		}
		if (debugToConsole)console.log("Show: end. Started = " + infoWindowAMTimerStarted);
	}

	function hideModalInfoWindow() {
		infoWindowHideFired = new Date().getTime();
		if (debugToConsole)console.log("Hide: begin");
		if (infoWindowAMShown) {
			if (debugToConsole)console.log("Hide: panel opened. Hiding...");
			Richfaces.hideModalPanel('wait');
			infoWindowAMShown = false;
			if (debugToConsole)console.log("Hide: panel hid.");
		}
	}

	var heightJS = 500;

	if (window.innerHeight) {
		heightJS = window.innerHeight;
	}
	else if (document.documentElement && document.documentElement.clientHeight) {
		heightJS = document.documentElement.clientHeight;
	}
	else if (document.body) {
		heightJS = document.body.clientHeight;
	}

	var heightHdMenu = heightJS - 43 - 55;
	var heightMenuLayer = heightJS - 43 - 5 - 22; //22-padding top&bottom
	var heightTable = 200;
	/*
	 window.document.onresize = function(event) {
	 if (window.innerHeight) {
	 heightJS=window.innerHeight;
	 }
	 else if (document.documentElement && document.documentElement.clientHeight) {
	 heightJS=document.documentElement.clientHeight;
	 }
	 else if (document.body) {
	 heightJS=document.body.clientHeight;
	 }
	 alert('resize');
	 refreshTableBase();
	 };
	 */
	function refreshTableBase() {
		//alert('refresh');
	}
	function resizeTable() {
		alert("finish");
	}

	function colorIt(formName, treeName) {
		var $tree = jQuery("#" + formName + ":" + treeName);
		var $selected = $tree.find('.selectedMenuItem');
		var $selectedParents = $selected.parents('div:eq(0)').add($selected.parents('.rich-tree-node-children'));
		$selectedParents.add($selectedParents.prev()).css('background-color', '#f2f3eb');
		$selected.css('background-color', '#dde0cb');

		renderBottomBorders(formName, treeName);
		formCorners(formName, treeName);
	}

	function renderBottomBorders(formName, treeName) {
		var element = document.getElementById(formName + ":" + treeName + ":childs");
		if (element == null) {
			return;
		}
		var elems = element.childNodes, i = 0, el;
		while (el = elems[i++]) {
			if (el.tagName == "DIV" && el.style.display == "none") {
				document.getElementById(el.id.substr(0, el.id.lastIndexOf(":"))).style.borderBottomWidth = "1px";
			} else if (el.tagName == "DIV" && el.style.display == "") {
				document.getElementById(el.id.substr(0, el.id.lastIndexOf(":"))).style.borderBottomWidth = "0px";
			}
		}

	}

	function formCorners(formName, treeName) {
		var element = document.getElementById(formName + ":" + treeName + ":childs");
		if (element == null) {
			return;
		}
		var elems = element.childNodes, i = 0, el;
		var last;
		// hope they come in right order
		while (el = elems[i++]) {
			if (el.tagName == "DIV") {
				last = false;
				var nestedElems = el.children;
				for (var j = 0; j < nestedElems.length; j++) {
					if (nestedElems[j].tagName == "TABLE" && j + 2 == nestedElems.length) {
						nestedElems[j].getElementsByTagName("SPAN")[0].parentNode.style.backgroundImage = "url()";
						last = true;
						continue;
					}
					if (nestedElems[j].tagName == "DIV") {
						var nestedNestedElems = nestedElems[j].children;
						for (var k = 0; k < nestedNestedElems.length; k++) {
							if (nestedNestedElems[k].tagName == "TABLE" && last) {
								nestedNestedElems[k].getElementsByTagName("SPAN")[0].parentNode.style.backgroundImage = "url()";
							}
						}
					}
				}
			}
		}
	}

	function changeCursorToDefault() {
		document.cursor = "";
		//alert("default");
	}

	function changeCursorToWait() {

		document.style.cursor = "url('hand')";
		//alert("waiting");
	}

	var stackCount = 0;
	var stack = new Array();
	function stackAdd(entry) {
		stack[stackCount] = entry;
		stackCount++;
	}
	function stackSub() {
		if (stackCount > 0) {
			stackCount = stackCount - 1;
			return stack[stackCount];
		} else return null;
	}

	function clickIt() {
		Richfaces.hideTopModalPanel();
	}

	function showPanel(el) {
		stackAdd(el);
	}

	function hidePanel() {
		stackSub();
	}

	function onLoad() {
		colorIt('menuForm', 'menuTree');
		colorIt('quickSearchForm', 'searchTree');
		colorIt('favoritesForm', 'favoritesTree');
		jQuery(document).ready(function(){
			fixScrollableTables();
		});

		filterOffsetLeft = jQuery('.link-filter a').offset().left - 150;
		filterOffsetTop = jQuery('.link-filter a').offset().top;
	}

	function showErrorDetails() {
		if (document.getElementById('err-ajax-form:errorDetails').value != "") {
			document.getElementById('err-ajax-form:errorDetails').style.display = "inline";
		}
	}

	function ignoreBackspace(e) {
		var keynum;
		var srcElem;

		if (!e) {
			keynum = window.event.keyCode;
			srcElem = window.event.srcElement;
		} else {
			keynum = e.which;
			srcElem = e.target;
		}
		if (keynum == 8 && (srcElem.tagName.toLowerCase() != "input"
				&& srcElem.tagName.toLowerCase() != "textarea"
				|| (srcElem.tagName.toLowerCase() == "input" && srcElem.readOnly))) {
			return false;
		}
		return true;
	}
	document.onkeydown = ignoreBackspace;
	document.onkeypress = ignoreBackspace; // for Opera
	function showHelp(url) {
		window.open(url, '', 'toolbar=no,location=no,menubar=no,status=no');
	}

	var actualHelp = {
		url: "#{pageHelp}",
		setHelp: function (u) {
			this.url = u;
		},
		setModeHelp: function (isNew) {
			if (isNew == "true")
				this.url = "#{pageHelpModalAdd}";
			else
				this.url = "#{pageHelpModalEdit}";
		},
		getURL: function () {
			return "/sv2help/pages/index.html";
		}
	}

	var layout;

	function updateGridHeight() {
		if (layout == undefined) return;
		var calculatedHeight;
		var JSF_ID_SEPARATOR = ':';
		var SEARCH_FORM = document.getElementById(layout.SEARCH_FORM_ID);
		var TOP_GRID_FORM = document.getElementById(layout.SEARCH_RESULT_FORM_ID);
		var TOP_GRID_FOOTER = document.getElementById(layout.SEARCH_RESULT_FOOTER_FORM_ID);
		var TABS_PANEL = document.getElementById(layout.TAB_PANEL_ID);
		if (SEARCH_FORM == null || TOP_GRID_FORM == null || TOP_GRID_FOOTER == null) return;
		var windowHeight = Stretch.getWindowHeight();
		var resultFormWrappedId = layout.SEARCH_RESULT_FORM_ID + JSF_ID_SEPARATOR + layout.SEARCH_RESULT_FORM_WRAPPER_ID;
		if (TABS_PANEL != null) {
			var isExpand = /expand/.test(jQuery('.search_result_block').attr('class'));
			calculatedHeight = windowHeight - (TOP_GRID_FOOTER.offsetTop + TOP_GRID_FOOTER.clientHeight + Stretch.HEADER_HEIGHT);

			if (isExpand)
				calculatedHeight = Stretch.COLLAPSE_TAB_HEIGHT;
			else if (calculatedHeight < Stretch.MIN_WORKPLACE_HEIGHT)
				calculatedHeight = Stretch.MIN_WORKPLACE_HEIGHT;

			TABS_PANEL.style.height = calculatedHeight + "px";

			if (!isExpand) {
				var array = layout.TAB_DATA;
				for (var i = 0; i < array.length; ++i) {
					var wrapperId = array[i].TAB_FORM_ID + JSF_ID_SEPARATOR + array[i].TAB_FORM_WRAPPER_ID;
					if (Stretch.exists(wrapperId))
						Stretch.updateTableHeightByFixedHeight(wrapperId, calculatedHeight - array[i].CORRECTING_HEIGHT);
				}
			}
			if (Stretch.exists(resultFormWrappedId))
				Stretch.updateTableHeightByWrapperHeight(resultFormWrappedId);
		} else {
			calculatedHeight = windowHeight - (TOP_GRID_FORM.offsetTop + TOP_GRID_FOOTER.clientHeight + Stretch.HEADER_HEIGHT + Stretch.TOP_PADDING);
			if (calculatedHeight < Stretch.MIN_WORKPLACE_HEIGHT) {
				calculatedHeight = Stretch.MIN_WORKPLACE_HEIGHT;
			}
			if (Stretch.exists(resultFormWrappedId))
				Stretch.updateTableHeightByFixedHeight(resultFormWrappedId, calculatedHeight);
		}
	}

	// -->
	</script>

</head>

<body onload="onLoad();" style="#{!usession.userLogged or menu.collapsed ? 'background-position: -196px 0pt;':''}" >
<f:view locale="#{usession.currentLocale}">
<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/richfaces.js"/>
<ui:insert name="baseContent">Body</ui:insert>

			<rich:modalPanel id="wait" autosized="true" shadowOpacity="0" shadowDepth="0"
		        moveable="false" style="background: transparent;border:none;"
		        >
		        <h:graphicImage url="/images/ajax-loader1.gif"/>
		    </rich:modalPanel>

<rich:hotKey key="esc" id="hk" handler="clickIt();"
	checkParent="true"/>
	    <ui:include src="/pages/utils/contextMenu.jspx"/>
		<a4j:outputPanel ajaxRendered="true" id="err_ajax">
			<h:form layout="none" id="err-ajax-form">
				<rich:modalPanel onshow="showPanel('err-ajax-form:cancel_btn');returnFormFields()"
					onhide="hidePanel()" domElementAttachment="parent"
					id="err_modal_panel" autosized="true" minWidth="300" minHeight="50"
					zindex="999">
					<f:facet name="header">
						<h:panelGroup>
							<h:outputText value="#{lblForm.error}"
								rendered="#{usession.severityError}" />
							<h:outputText value="#{lblForm.system_error}"
								rendered="#{usession.severityFatal}" />
						</h:panelGroup>
					</f:facet>

					<f:facet name="controls">
						<h:panelGroup>
							<h:outputText value="X" styleClass="hidelink" id="hideErrorLink" />
							<rich:componentControl for="err_modal_panel"
								attachTo="hideErrorLink" operation="hide" event="onclick" />
						</h:panelGroup>
					</f:facet>

					<bre:messages style="color:red;padding-right:10px" />

					<h:panelGroup
						rendered="#{!usession.severityFatal}">
						<h:panelGrid columns="1" style="padding-left:10px;">

							<a4j:commandLink value="Details"
											 limitToList="true"
											 reRender="errorDetails"
											 action="#{MbErrorUtils.setShowErrorDetails(true)}"/>
							<h:panelGroup id="errorDetails">
								<h:outputFormat value="#{usession.errorDetails}"
												styleClass="errorMarker" rendered="#{MbErrorUtils.showErrorDetails}">
								</h:outputFormat>
							</h:panelGroup>
						</h:panelGrid>
					</h:panelGroup>

					<h:panelGroup layout="block" style="padding:10px;">
						<h:panelGroup rendered="#{usession.severityFatal}" layout="block" style="background-color: white;width:500px;height:300px;overflow: auto;border:1px solid #D7DAC2;">
							<h:panelGroup style="width:1000px;padding:5px;" layout="block">
								<h:outputText value="#{MbErrorUtils.detailsForError}"/>
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>

					<h:panelGroup layout="block"
						styleClass="bottom_search_result_block_buttons">
						<h:panelGroup layout="block"
							styleClass="bottom_search_result_left_buttons"
							style="text-align:center">
							<h:panelGroup styleClass="stdButton">
								<a4j:commandLink value="#{lblForm.close}" immediate="true"
									id="cancel_btn"
									oncomplete="#{rich:component('err_modal_panel')}.hide(); return false;" />
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>
				</rich:modalPanel>
			</h:form>
            <h:panelGroup rendered="#{!usession.noErrorResponse and usession.unrenderedMessagesExist}">
                <script type="text/javascript">
                    Richfaces.showModalPanel('err_modal_panel');
                </script>
            </h:panelGroup>
		</a4j:outputPanel>

<h:form>
    <a4j:jsFunction name="updateTable"
                    reRender="entityTable">
    </a4j:jsFunction>
</h:form>

<a4j:outputPanel ajaxRendered="true">
<rich:jQuery selector=".search_block .collapse-vert"
	query="click(function(){
							if(/collapsed/.test(jQuery('.search_block').attr('class'))){
								jQuery('.search_block').removeClass('searchblock-collapsed');
							}else{
								jQuery('.search_block').addClass('searchblock-collapsed');
							}
							updateHeight();
							fixScrollableTables();
							})" />

<rich:jQuery selector=".search_block .show-more-vert"
	query="click(function(){
							if (/show$/.test(jQuery('.search_block_inner').attr('class'))) {
								jQuery('.search_block_inner').removeClass('search_block_inner-show');
								jQuery('.search_block_inner').addClass('search_block_inner-hidden');
								jQuery('.show-more-vert').removeClass('show-more-vert-up');
							} else if (/show-filter/.test(jQuery('.search_block_inner').attr('class'))) {
								jQuery('.search_block_inner').removeClass('search_block_inner-show-filter');
								jQuery('.search_block_inner').addClass('search_block_inner-hidden-filter');
								jQuery('.show-more-vert').removeClass('show-more-vert-up');
							}else if (/hidden-filter/.test(jQuery('.search_block_inner').attr('class'))) {
								jQuery('.search_block_inner').addClass('search_block_inner-show-filter');
								jQuery('.search_block_inner').removeClass('search_block_inner-hidden-filter');
								jQuery('.show-more-vert').addClass('show-more-vert-up');								
							} else if (/show-filter/.test(jQuery('.search_block_inner-0').attr('class'))) {
								jQuery('.search_block_inner-0').removeClass('search_block_inner-show-filter');
								jQuery('.search_block_inner-0').addClass('search_block_inner-hidden-filter');
								jQuery('.show-more-vert').removeClass('show-more-vert-up');
							}else if (/hidden-filter/.test(jQuery('.search_block_inner-0').attr('class'))) {
								jQuery('.search_block_inner-0').addClass('search_block_inner-show-filter');
								jQuery('.search_block_inner-0').removeClass('search_block_inner-hidden-filter');
								jQuery('.show-more-vert').addClass('show-more-vert-up');								
							}else{
								jQuery('.search_block_inner').addClass('search_block_inner-show');
								jQuery('.search_block_inner').removeClass('search_block_inner-hidden');
								jQuery('.show-more-vert').addClass('show-more-vert-up');								
							}
							updateHeight();
							fixScrollableTables();
							})" />

<rich:jQuery selector=".collapse-vert-tab"
	query="click(function(){
							if(/collapsed/.test(jQuery('.search_block_tabs').attr('class'))){
								jQuery('.search_block_tabs').removeClass('searchblock-collapsed');
								jQuery('.search-block-tabs-head').removeClass('search-block-tabs-head-background');
							}else{
								jQuery('.search_block_tabs').addClass('searchblock-collapsed');
								jQuery('.search-block-tabs-head').addClass('search-block-tabs-head-background');
							}
						    updateHeight();
                            fixScrollableTables();
							})" />

<rich:jQuery selector=".search_result_block .show-more-vert"
	query="click(function(){
							if (/expand/.test(jQuery('.search_result_block').attr('class'))){
								jQuery('.search_result_block').removeClass('search_result_block-expand');
								jQuery('.search_result_block_inner').css('height', '255px');
								jQuery('.search_result_block_tree_inner').css('height', '255px');
								
								jQuery('.workplace .rich-tabpanel-content-position').css('display', '');	
							}else{
								jQuery('.search_result_block').addClass('search_result_block-expand');
								var mainDivHeight = 255 + Stretch.MIN_WORKPLACE_HEIGHT - 25;			
								jQuery('.search_result_block_inner').css('height', mainDivHeight + 'px');
								jQuery('.search_result_block_tree_inner').css('height', mainDivHeight + 25 + 'px');
								
								jQuery('.workplace .rich-tabpanel-content-position').css('display', 'none');
							}
							updateHeight();
							fixScrollableTables();
							})" />

<rich:jQuery selector=".show-more-vert-tab"
	query="click(function(){
							if(/show$/.test(jQuery('.search_block_inner').attr('class'))){
								jQuery('.search_block_inner').removeClass('search_block_inner-show');
								jQuery('.search_block_inner').addClass('search_block_inner-hidden');
								jQuery('.show-more-vert-tab').removeClass('show-more-vert-up');
							} else {
								jQuery('.search_block_inner').addClass('search_block_inner-show');
								jQuery('.search_block_inner').removeClass('search_block_inner-hidden');
								jQuery('.show-more-vert-tab').addClass('show-more-vert-up');								
							}
						    updateHeight();
                            fixScrollableTables();
							})" />
<rich:jQuery selector=".result-block-tab .collapse-vert"
	query="click(function(){
							if(/collapsed/.test(jQuery('.result-block-tab-body').attr('class'))){
								jQuery('.result-block-tab-body').removeClass('collapsed');
								jQuery('.result-block-tab').removeClass('header-stub');
								jQuery('.header-stub-curve').hide();
								jQuery('.result-block-tab .collapse-vert').css('background-position', '0 0');
							}else{
								jQuery('.result-block-tab-body').addClass('collapsed');
								jQuery('.result-block-tab').addClass('header-stub');
								jQuery('.header-stub-curve').show();
								jQuery('.result-block-tab .collapse-vert').css('background-position', '-15px 0');
							}
							if (window['updateHeight']) updateHeight();
							})" />

<rich:jQuery selector=".search_result_block .collapse-vert, .bottom_search_result_wrapper .collapse-vert"
	query="click(function(){
							if (/collapsed/.test(jQuery('.search_result_block').attr('class'))){
								jQuery('.search_result_block').removeClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_block').removeClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_block-tree').removeClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_wrapper').removeClass('searchresultblock-collapsed');
								updateTable();
							}else{
								jQuery('.search_result_block').addClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_block').addClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_block-tree').addClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_wrapper').addClass('searchresultblock-collapsed');
							}
							updateHeight();
							fixScrollableTables();
							})" />

<rich:jQuery selector=".search_result_block .expand-vert,.bottom_search_result_wrapper .expand-vert"
	query="click(function(){
							if (/collapsed/.test(jQuery('.search_result_block').attr('class'))){
								jQuery('.search_result_block').removeClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_block').removeClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_block-tree').removeClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_wrapper').removeClass('searchresultblock-collapsed');
							}else{
								jQuery('.search_result_block').addClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_block').addClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_block-tree').addClass('searchresultblock-collapsed');
								jQuery('.bottom_search_result_wrapper').addClass('searchresultblock-collapsed');
							}
							updateHeight();
							fixScrollableTables();
							})" />

<rich:jQuery selector=".hd-menu"
	query="mouseover(function(){
							if (/collapsed/.test(jQuery('.mainmenu').attr('class')))
							{
								jQuery('.mainmenu').removeClass('mainmenu-collapsed');
								jQuery('.hd-menu').css('display', 'none');
								jQuery('.mainmenu').addClass('mainmenu-layer');
								jQuery('.collapse-horiz').css('display', 'none');
								jQuery('.mainmenu-layer').css('height', heightMenuLayer+'px');								
							}
							})" />
<rich:jQuery selector=".mainmenu"
	query="mouseleave(function(){
							if (/layer/.test(jQuery('.mainmenu').attr('class')))
							{
									jQuery('.mainmenu-layer').css('height', '0px');
									jQuery('.mainmenu').removeClass('mainmenu-layer');
									jQuery('.hd-menu').css('display', 'inline');
									jQuery('.mainmenu').addClass('mainmenu-collapsed').css('height', '5%');
									jQuery('.collapse-horiz').css('display', 'inline');
									jQuery('.hd-menu').css('height', heightHdMenu+'px');									
							}
							})" />
<rich:jQuery selector="document" timing="onload"
	query="ready(function(){
								jQuery('.hd-menu').css('height', heightHdMenu+'px');
							})" />
<rich:jQuery selector="document" rendered="false"
	query="ready(function(){
							var searchBlockHeight;
							searchBlockHeight = jQuery('.search_block_tabs').height();
							if ( searchBlockHeight == null) {
								searchBlockHeight = jQuery('.search_block').height();								 
							}	
							var height1 = jQuery('.header').height() + jQuery('.crumbs').height() + searchBlockHeight + jQuery('.bottom_search_result_block').height() + jQuery('.workplace').height();
							var heightResult = heightJS - height1-50;
							if (heightResult &lt; 100) {
								heightResult = 100;
							}
							jQuery('.search_result_block_left').css('height', heightResult+'px');
							
							})" />
<rich:jQuery selector="document" rendered="false"
	query="ready(function(){
							var searchBlockHeight;							 
							var height1 = jQuery('.header').height();							
							var heightResult = heightJS - height1-10;
							jQuery('.content').css('height', heightResult+'px');							
							})" />


<rich:jQuery selector="document" timing="onJScall" name="refreshTableBase" rendered="false"
	query="ready(function(){
							alert('2'); 
							var height1 = jQuery('.header').height() + jQuery('.crumbs').height() + jQuery('.search_block').height() + jQuery('.bottom_search_result_block').height() + jQuery('.workplace').height();
							var heightResult = heightJS - height1-90;
							jQuery('.search_result_block .extdt-content').css('height', heightResult+'px');	
							})" />
</a4j:outputPanel>
	<!-- Removed JSF debug as it's flooding web session with lots of unnecessary (in production) data
	If it's still needed, please consider to conditionally enable it on non-production environments only.
	Otherwise, it will be completely removed in a while
	<ui:debug hotkey="V"/>
	-->
<script>
	//<![CDATA[
		jQuery('.mainmenu .collapse-horiz').bind("click", function(){
											changeMenuState();
											if (/collapsed/.test(jQuery('.mainmenu').attr('class')))
											{
												jQuery('.hd-menu').css('display', 'none');
												jQuery('.content').css('margin-left', '233px');
												jQuery(document.body).css('background-position', '0 0');
												jQuery('.mainmenu').removeClass('mainmenu-collapsed');
												jQuery('.mainmenu').css('height', '92%');
											}
											else
											{
												jQuery('.hd-menu').css('display', 'inline');
												jQuery('.content').css('margin-left', '30px');
												jQuery(document.body).css('background-position', '-196px 0');
												jQuery('.hd-menu').css('height', heightHdMenu+'px');
												jQuery('.mainmenu').addClass('mainmenu-collapsed').css('height', '5%');
											}
										});
	//]]>
</script>

	<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/patch.js"/>
</f:view>

<rich:jQuery selector=".pzKpfwBtn"
	query="mousedown(
			function() {jQuery(this).addClass('pzKpfwBtnActive');})"
/>

<rich:jQuery selector=".pzKpfwBtn"
	query="mouseup(
			function() {jQuery(this).removeClass('pzKpfwBtnActive');})"
/>

	<a4j:include id="contextMenuModalPanel" viewId="/pages/context/contextModal.jspx" ajaxRendered="false">
		<ui:param name="viewId" value="contextMenuModalPanel"/>
		<ui:param name="viewIdColon" value="contextMenuModalPanel:"/>
		<ui:param name="fromCtx" value="true"/>
	</a4j:include>

    <ui:include src="/pages/utils/confirmPanel.jspx">
        <ui:param name="warningMsg" value=""/>
        <ui:param name="confirmQuestion" value=" "/>
        <ui:param name="subviewId" value="baseWarningDialog"/>
        <ui:param name="yesAction" value=""/>
        <ui:param name="noAction" value=""/>
        <ui:param name="no" value="#{lblForm.ok}"/>
    </ui:include>
</body>
</html>
