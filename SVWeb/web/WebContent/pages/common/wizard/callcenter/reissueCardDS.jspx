<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j">
<ui:composition template="./issCardDetailsTemplate.jspx">
    <ui:define name="stepContent">
        <script type="text/javascript">
            //<![CDATA[
            function checkWizardMbReissueCardDS() {
                var reissueCardDSChecked = true;

                var reissueReason = document.getElementById('#{viewId}stepPageInclude:reissueCardDataForm:reissueReason');
                var reissueCommand = document.getElementById('#{viewId}stepPageInclude:reissueCardDataForm:reissueCommand');

                reissueReason.style.background = '#FFFFFF';
                reissueCommand.style.background = '#FFFFFF';

                if (reissueReason.value == "" && reissueCommand.value == "") {
                    reissueReason.style.background = '#FF9999';
                    reissueCommand.style.background = '#FF9999';
                    reissueCardDSChecked = false;
                }
                return reissueCardDSChecked;
            }
            //]]>
        </script>
        <f:loadBundle var="lblCrd" basename="ru.bpc.sv2.ui.bundles.Crd" />
        <f:loadBundle var="lblMsg" basename="ru.bpc.sv2.ui.bundles.Msg" />
        <!--@elvariable id="stepBean" type="ru.bpc.sv2.ui.common.wizard.callcenter.MbReissueCardDS"-->
        <h:form id="reissueCardDataForm">
            <ui:include src="/pages/common/wizard/commonWizardActions.jspx">
                <ui:param name="bean" value="#{bean}" />
                <ui:param name="action" value="#{action}" />
            </ui:include>

            <h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
                <h:panelGrid columns="2" styleClass="cardholderdata"
                             columnClasses="width-150, width250">

                    <h:outputLabel for="reissueReason" title="#{lblIss.REISSUE_REASON}" value="#{lblIss.REISSUE_REASON}:"/>
                    <h:selectOneMenu id="reissueReason" value="#{stepBean.reissueReason.reissueReason}" label="#{lblIss.REISSUE_REASON}">
                        <a4j:support event="onchange"
                                     reRender="reissueCardDataForm:reissueCommand, reissueCardDataForm:pinRequest,
											reissueCardDataForm:pinMailerRequest, reissueCardDataForm:embossRequest, reissueCardDataForm:reissueStartDateRule,
											reissueCardDataForm:reissueExpirDateRule, reissueCardDataForm:persoPriority"
                                     ajaxSingle="true" limitToList="true"
                                     action="#{stepBean.onReissueReasonChanged}" />
                        <f:selectItem itemValue="" />
                        <f:selectItems value="#{stepBean.reissueReasons}" />
                    </h:selectOneMenu>

                    <h:outputLabel for="reissueCommand" title="#{lblIss.reiss_command}"
                                   value="#{lblIss.reiss_command}:" />
                    <h:selectOneMenu id="reissueCommand" value="#{stepBean.reissueReason.reissueCommand}" label="#{lblIss.reiss_command}"
                                     disabled="#{!stepBean.isEmptyReissueReason()}">
                        <f:selectItem itemValue="" />
                        <f:selectItems value="#{stepBean.reissueCommands}" />
                    </h:selectOneMenu>

                    <h:outputLabel for="pinRequest" title="#{lblIss.pin_request}"
                                   value="#{lblIss.pin_request}:" />
                    <h:selectOneMenu id="pinRequest" value="#{stepBean.reissueReason.pinRequest}" label="#{lblIss.pin_request}"
                                     disabled="#{!stepBean.isEmptyReissueReason()}">
                        <f:selectItem itemValue="" />
                        <f:selectItems value="#{stepBean.pinRequests}" />
                    </h:selectOneMenu>

                    <h:outputLabel for="pinMailerRequest" title="#{lblIss.pin_mailer_request}"
                                   value="#{lblIss.pin_mailer_request}:" />
                    <h:selectOneMenu id="pinMailerRequest" value="#{stepBean.reissueReason.pinMailerRequest}" label="#{lblIss.pin_mailer_request}"
                                     disabled="#{!stepBean.isEmptyReissueReason()}">
                        <f:selectItem itemValue="" />
                        <f:selectItems value="#{stepBean.pinMailerRequests}" />
                    </h:selectOneMenu>

                    <h:outputLabel for="embossRequest" title="#{lblIss.embossing_request}"
                                   value="#{lblIss.embossing_request}:" />
                    <h:selectOneMenu id="embossRequest" value="#{stepBean.reissueReason.embossingRequest}" label="#{lblIss.embossing_request}"
                                     disabled="#{!stepBean.isEmptyReissueReason()}">
                        <f:selectItem itemValue="" />
                        <f:selectItems value="#{stepBean.embossRequests}" />
                    </h:selectOneMenu>

                    <h:outputLabel for="reissueStartDateRule" title="#{lblIss.reiss_start_date}"
                                   value="#{lblIss.reiss_start_date}:" />
                    <h:selectOneMenu id="reissueStartDateRule" value="#{stepBean.reissueReason.reissStartDateRule}" label="#{lblIss.reiss_start_date}"
                                     disabled="#{!stepBean.isEmptyReissueReason()}">
                        <f:selectItem itemValue="" />
                        <f:selectItems value="#{stepBean.reissueStartDateRules}" />
                    </h:selectOneMenu>

                    <h:outputLabel for="reissueExpirDateRule" title="#{lblIss.reiss_expir_date}"
                                   value="#{lblIss.reiss_expir_date}:" />
                    <h:selectOneMenu id="reissueExpirDateRule" value="#{stepBean.reissueReason.reissExpirDateRule}" label="#{lblIss.reiss_expir_date}"
                                     disabled="#{!stepBean.isEmptyReissueReason()}">
                        <f:selectItem itemValue="" />
                        <f:selectItems value="#{stepBean.reissueExpirDateRules}" />
                    </h:selectOneMenu>

                    <h:outputLabel for="persoPriority" title="#{lblIss.perso_priority}"
                                   value="#{lblIss.perso_priority}:" />
                    <h:selectOneMenu id="persoPriority" value="#{stepBean.reissueReason.persoPriority}" label="#{lblIss.perso_priority}"
                                     disabled="#{!stepBean.isEmptyReissueReason()}">
                        <f:selectItem itemValue="" />
                        <f:selectItems value="#{stepBean.persoPriorities}" />
                    </h:selectOneMenu>

                </h:panelGrid>
            </h:panelGroup>
        </h:form>
    </ui:define>
</ui:composition>
</html>
