<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:bpct="http://www.bpc.ru/jsf/tiles"
      xmlns:bre="http://www.bpc.ru/jsf/richfaces-ext"
      xmlns:bm="http://www.bpc.ru/jsf/misc"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:bpc="http://www.bpc.ru/jsf/misc">
    <ui:composition template="../accDetailsTemplate.jspx">
        <ui:define name="stepContent">
            <f:loadBundle var="lblCommon" basename="ru.bpc.sv2.ui.bundles.Common" />
            <f:loadBundle var="lblAcc" basename="ru.bpc.sv2.ui.bundles.Acc" />
            <f:loadBundle var="lblOpr" basename="ru.bpc.sv2.ui.bundles.Opr" />
            <f:loadBundle var="lblApp" basename="ru.bpc.sv2.ui.bundles.App" />
            <f:loadBundle var="lblCrd" basename="ru.bpc.sv2.ui.bundles.Crd" />

            <h:form id="balanceTransferFromPrepaidCardDSform" style="padding:10px;">
                <ui:include src="/pages/common/wizard/commonWizardActions.jspx">
                    <ui:param name="bean" value="#{bean}" />
                    <ui:param name="action" value="#{action}" />
                </ui:include>

                <h:panelGroup rendered="#{!MbBalanceTransferFromPrepaidCardRS.maker}">
                    <h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
                        <h:panelGrid columns="2" styleClass="cardholderdata"
                                     columnClasses="width-150, width250">

                            <h:outputLabel for="operationResult" title="#{lblCommon.result_code}"
                                           value="#{lblCommon.result_code}:" />
                            <h:inputText id="operationResult"
                                         value="#{MbBalanceTransferFromPrepaidCardRS.appStatus} - #{DictUtils.articles[MbBalanceTransferFromPrepaidCardRS.appStatus]}"
                                         label="#{lblCommon.result_code}" readonly="true">
                            </h:inputText>

                        </h:panelGrid>
                    </h:panelGroup>
                </h:panelGroup>
                <h:panelGroup rendered="#{MbBalanceTransferFromPrepaidCardRS.maker}">
                    <h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
                        <h:outputLabel title="#{lblApp.application}" value="#{lblApp.application}"
                                       style="padding-bottom: 5px;"/>
                        <h:panelGrid columns="2" styleClass="cardholderdata" columnClasses="width-150, width250">
                            <h:outputLabel title="#{lblApp.application_id}" value="#{lblApp.application_id}: " />
                            <h:outputText title="#{MbBalanceTransferFromPrepaidCardRS.application.id}"
                                          value="#{MbBalanceTransferFromPrepaidCardRS.application.id}"/>

                            <h:outputLabel title="#{lblApp.application_flow}" value="#{lblApp.application_flow}: " />
                            <h:outputText title="#{MbBalanceTransferFromPrepaidCardRS.application.flowId}"
                                          value="#{MbBalanceTransferFromPrepaidCardRS.application.flowId}"/>

                            <h:outputLabel title="#{lblApp.application_status}" value="#{lblApp.application_status}: " />
                            <h:outputText title="#{MbBalanceTransferFromPrepaidCardRS.application.status}"
                                          value="#{MbBalanceTransferFromPrepaidCardRS.application.status}"/>
                        </h:panelGrid>
                    </h:panelGroup>

                    <h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
                        <h:outputLabel title="#{lblOpr.source_card}" value="#{lblOpr.source_card}"
                                       style="padding-bottom: 5px;"/>
                        <h:panelGrid columns="2" styleClass="cardholderdata" columnClasses="width-150, width250">
                            <h:outputLabel title="#{lblCrd.card_number}" value="#{lblCrd.card_number}: " />
                            <h:outputText title="#{MbBalanceTransferFromPrepaidCardRS.sourceCard.mask}"
                                          value="#{MbBalanceTransferFromPrepaidCardRS.sourceCard.mask}"/>

                            <h:outputLabel title="#{lblAcc.account}" value="#{lblAcc.account}: " />
                            <h:outputText title="#{MbBalanceTransferFromPrepaidCardRS.sourceAccount.accountNumber}"
                                          value="#{MbBalanceTransferFromPrepaidCardRS.sourceAccount.accountNumber}"/>

                            <h:outputLabel title="#{lblAcc.available_balance}" value="#{lblAcc.available_balance}: " />
                            <h:outputText title="#{MbBalanceTransferFromPrepaidCardRS.sourceAccount.balance}"
                                          value="#{MbBalanceTransferFromPrepaidCardRS.sourceAccount.balance}"/>
                        </h:panelGrid>
                    </h:panelGroup>

                    <h:panelGroup layout="block" styleClass="cardholderdata-wrapper">
                        <h:outputLabel title="#{lblOpr.destination}" value="#{lblOpr.destination}"
                                       style="padding-bottom: 5px;"/>
                        <h:panelGrid columns="2" styleClass="cardholderdata" columnClasses="width-150, width250">
                            <h:outputLabel title="#{lblAcc.transfer_amount}" value="#{lblAcc.transfer_amount}: " />
                            <h:panelGrid id="amountGrid" cellpadding="0" cellspacing="0" columns="1" width="100%">
                                <h:outputText title="#{MbBalanceTransferFromPrepaidCardRS.amount}"
                                              value="#{MbBalanceTransferFromPrepaidCardRS.amount}">
                                    <bpc:numericMaskConverter numericType="double" />
                                    <f:attribute name="decDigits"
                                                 value="#{CurrencyUtils.currencyObjectsMap[MbBalanceTransferFromPrepaidCardRS.sourceAccount.currency].exponent}" />
                                </h:outputText>
                                <bpc:jsMask for="amount"
                                            decDigits="#{CurrencyUtils.currencyObjectsMap[MbBalanceTransferFromPrepaidCardRS.sourceAccount.currency].exponent}" />
                            </h:panelGrid>

                            <h:outputLabel title="#{lblAcc.currency}" value="#{lblAcc.currency}: " />
                            <h:outputText title="#{MbBalanceTransferFromPrepaidCardRS.sourceAccount.currency}"
                                          value="#{MbBalanceTransferFromPrepaidCardRS.sourceAccount.currency}"/>

                            <h:outputLabel title="#{lblAcc.account}" value="#{lblAcc.account}: " />
                            <h:outputText title="#{MbBalanceTransferFromPrepaidCardRS.destAccount.accountNumber}"
                                          value="#{MbBalanceTransferFromPrepaidCardRS.destAccount.accountNumber}"/>
                        </h:panelGrid>
                    </h:panelGroup>
                </h:panelGroup>
            </h:form>
        </ui:define>
    </ui:composition>
</html>
